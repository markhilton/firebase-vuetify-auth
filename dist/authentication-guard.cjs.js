(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".large-font>input[data-v-653c13d3]{font-size:1.5rem}.centered-input>input[data-v-653c13d3]{text-align:center;font-weight:700;font-size:1.5rem}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const X=require("pinia"),_=require("firebase/auth"),e=require("vue"),W=require("vuetify/components/VIcon"),H=require("vuetify/components/VList"),U=require("vuetify/components/VAlert"),x=require("vuetify/components/VBtn"),N=require("vuetify/components/VCard"),Q=require("vuetify/components/VCheckbox"),B=require("vuetify/components/VGrid"),I=require("vuetify/components/VTextField"),J=require("vuetify/components/VForm"),M=require("vuetify/components/VTooltip"),ee=require("vue-router"),te=require("vuetify/components/VDialog"),oe=require("vuetify/components/VProgressLinear"),R=require("vuetify/components/VTabs"),re=()=>({loggedIn:!1,initialized:!1,data:null,loginState:null,registrationPending:!1,registrationData:null,phoneAuthCredential:null,config:null,error:null,loading:!1,showPassword:!1,showPhoneAuth:!1,showSamlSSO:!1,showRegister:!1,showVerifyEmail:!1,showForgotPassword:!1,showResetPassword:!1,currentTab:null,samlError:null,samlProviderId:null,phoneAuthInProgress:!1,phoneAuthVerificationId:null,phoneConfirmationResult:null,localLoginData:null,routesInitialized:!1,current_user:null,init:!1,is_loading:!1,is_checking_auth:!1,is_session_persistant:!0,is_login_with_phone_shown:!1,is_authguard_dialog_shown:!1,is_authguard_dialog_persistent:!1,is_email_verification_link_sent:!1,is_email_reset_password_link_sent:!1,is_email_verification_screen_shown:!1,is_reset_password_screen_shown:!1,is_route_public:!1,is_from_public_to_auth:!1,text_confirmation:null,sign_by_phone_step:1,tab:0}),ie={getError:o=>o.error,sessionPersistence:o=>{var t;return((t=o.config)==null?void 0:t.sessionPersistence)||"LOCAL"},uid:o=>{var t;return((t=o.current_user)==null?void 0:t.uid)||null},email:o=>{var t;return((t=o.current_user)==null?void 0:t.email)||null},emailVerified:o=>{var t;return((t=o.current_user)==null?void 0:t.emailVerified)||!1},displayName:o=>{var t;return((t=o.current_user)==null?void 0:t.displayName)||null},getDisplayName:o=>{var t;return((t=o.current_user)==null?void 0:t.displayName)||null},photoURL:o=>{var t;return((t=o.current_user)==null?void 0:t.photoURL)||null},providerData:o=>{var t;return((t=o.current_user)==null?void 0:t.providerData)||[]},phoneNumber:o=>{var t;return((t=o.current_user)==null?void 0:t.phoneNumber)||null},isAuthenticated:o=>o.loggedIn,isReady:o=>o.routesInitialized,isAnonymous:o=>{var t;return((t=o.current_user)==null?void 0:t.isAnonymous)||!1},requiresEmailVerification:o=>{var t,r,i;if((t=o.config)!=null&&t.requireEmailVerification&&!((r=o.current_user)!=null&&r.emailVerified)){const s=o.config.allowedDomains,a=(i=o.current_user)==null?void 0:i.email;if(s!=null&&s.length&&a){const l=a.split("@")[1];return s.includes(l)}return!0}return!1},isDomainAllowed:o=>{var s,a;const t=(s=o.config)==null?void 0:s.allowedDomains;if(!(t!=null&&t.length))return!0;const r=(a=o.current_user)==null?void 0:a.email;if(!r)return!0;const i=r.split("@")[1];return t.includes(i)},isUserAllowed:o=>{var i,s;const t=(i=o.config)==null?void 0:i.allowedUsers;if(!(t!=null&&t.length))return!0;const r=(s=o.current_user)==null?void 0:s.email;return r?t.includes(r):!1},hasProvider:o=>t=>{var r,i;return((i=(r=o.current_user)==null?void 0:r.providerData)==null?void 0:i.some(s=>s.providerId===t))||!1},hasPasswordProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(i=>i.providerId==="password"))||!1},hasPhoneProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(i=>i.providerId==="phone"))||!1},hasSocialProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(i=>["google.com","facebook.com","saml"].includes(i.providerId)))||!1},isOnlySingleProvider:o=>{const t=o.config;return t?[t.google,t.facebook,t.email,t.phone,t.saml].filter(Boolean).length===1:!1},isUserRegistrationAllowed:o=>{var t;return((t=o.config)==null?void 0:t.registration)??!0},isResetPasswordScreenShown:o=>o.is_reset_password_screen_shown,isLoginWithPhoneShown:o=>o.is_login_with_phone_shown,isEmailVerificationScreenShown:o=>o.is_email_verification_screen_shown,isEmailVerificationLinkSent:o=>o.is_email_verification_link_sent,isEmailResetPasswordLinkSent:o=>o.is_email_reset_password_link_sent,getAuthGuardDialogPersistence:o=>o.is_authguard_dialog_persistent,isLoginWithProvidersActive:o=>{const t=o.config;return t?!!(t.google||t.facebook||t.saml||t.phone):!1},isCheckingAuth:o=>o.is_checking_auth},se={SET_TAB(o){this.tab=o},SET_EMAIL_VERIFICATION_SCREEN_SHOWN(o){this.is_email_verification_screen_shown=o,o===!1&&(this.error=null)},SET_REGISTER_SCREEN_SHOWN(o){this.tab=o?0:1,this.is_reset_password_screen_shown=o},SET_PASSWORD_RESET_SCREEN_SHOWN(o){this.tab=o?1:0,this.is_reset_password_screen_shown=o,o===!1&&(this.is_email_reset_password_link_sent=!1)},SET_SHOW_LOGIN_WITH_PHONE(o){this.tab=0,this.is_login_with_phone_shown=o,o===!1&&(this.sign_by_phone_step=1)},async initializeGuard(){const o=this.config.debug,t=_.getAuth(this.config.firebase);o&&console.log("[ auth guard ]: component initialization"),this.is_checking_auth=!0;try{const r=await _.getRedirectResult(t);if(r&&r.user){o&&console.log("[ auth guard ]: redirect result found, processing...");const{uid:i,displayName:s,email:a,emailVerified:l,isAnonymous:d,phoneNumber:c,photoURL:h}=r.user;this.current_user={uid:i,displayName:s,email:a,emailVerified:l,isAnonymous:d,phoneNumber:c,photoURL:h},this.loggedIn=!0,this.data=r.user,this.is_authguard_dialog_shown=!1,this.is_loading=!1,this._handlePostAuthRedirect()}}catch(r){o&&console.error("[ auth guard ]: redirect result error:",r),this.error=r,this.is_loading=!1}return new Promise(r=>{const i=t.onAuthStateChanged(s=>{var a;if(s){const{uid:l,displayName:d,email:c,emailVerified:h,isAnonymous:u,phoneNumber:m,photoURL:b}=s;this.current_user={uid:l,displayName:d,email:c,emailVerified:h,isAnonymous:u,phoneNumber:m,photoURL:b},this.loggedIn=!0,this.data=s,o&&console.log("[ auth guard ]: initialization - user authenticated")}else{const l=this.loggedIn;if(this.current_user=null,this.loggedIn=!1,this.data=null,o&&console.log("[ auth guard ]: initialization - no user"),this.init&&l&&((a=this.router)!=null&&a.currentRoute.value)){const d=this.router.currentRoute.value;d.matched.some(h=>h.meta.requiresAuth)&&(this.loginState=d.fullPath,this.toggleAuthDialog(!0),this.is_authguard_dialog_persistent=!0,o&&console.log("[ auth guard ]: showing auth dialog after sign out on protected route"))}}this.is_checking_auth=!1,i(),r()})})},_handlePostAuthRedirect(){var o;this.loginState&&this.router&&((((o=this.config)==null?void 0:o.debug)??!1)&&console.log("[ auth guard ]: Redirecting to:",this.loginState),this.router.push(this.loginState),this.loginState=null)},_isMobileDevice(){if(typeof window>"u")return!1;const o=window.navigator.userAgent.toLowerCase(),r=["android","webos","iphone","ipad","ipod","blackberry","windows phone"].some(a=>o.includes(a)),i="ontouchstart"in window||navigator.maxTouchPoints>0,s=window.innerWidth<=768;return r||i&&s},_getAuthMethod(){const o=this.config.authMethod||"auto";return o==="auto"?this._isMobileDevice()?"redirect":"popup":o},async _signInWithProvider(o,t){const r=_.getAuth(this.config.firebase),i=this._getAuthMethod(),s=this.config.authMethodFallback||(i==="popup"?"redirect":"popup");this.config.debug&&console.log(`[ auth guard ]: Trying ${i} method for ${t} authentication`);try{let a=null;if(i==="popup")a=await _.signInWithPopup(r,o);else return await _.signInWithRedirect(r,o),Promise.resolve({});return a}catch(a){if(this.config.debug&&console.error(`[ auth guard ]: ${t} ${i} auth failed:`,a),s&&a.code==="auth/popup-blocked"){this.config.debug&&console.log(`[ auth guard ]: Trying fallback ${s} method for ${t}`);try{return s==="popup"?await _.signInWithPopup(r,o):(await _.signInWithRedirect(r,o),Promise.resolve({}))}catch(l){throw this.config.debug&&console.error(`[ auth guard ]: ${t} fallback ${s} auth also failed:`,l),l}}throw a}},async loginWithEmail({email:o,password:t}){try{const r=_.getAuth(this.config.firebase);this.is_loading=!0,await _.signOut(r),this.is_session_persistant?await _.setPersistence(r,_.browserLocalPersistence):await _.setPersistence(r,_.browserSessionPersistence);const i=await _.signInWithEmailAndPassword(r,o,t);if(i.user){const{uid:s,displayName:a,email:l,emailVerified:d,isAnonymous:c,phoneNumber:h,photoURL:u}=i.user;this.current_user={uid:s,displayName:a,email:l,emailVerified:d,isAnonymous:c,phoneNumber:h,photoURL:u},this.loggedIn=!0,this.data=i.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve()}catch(r){return this.error=r,this.is_loading=!1,Promise.reject(r)}},async loginWithGoogle(){try{this.is_loading=!0;const o=new _.GoogleAuthProvider;o.setCustomParameters({prompt:"select_account"});const t=await this._signInWithProvider(o,"Google");if(t.user){const{uid:r,displayName:i,email:s,emailVerified:a,isAnonymous:l,phoneNumber:d,photoURL:c}=t.user;this.current_user={uid:r,displayName:i,email:s,emailVerified:a,isAnonymous:l,phoneNumber:d,photoURL:c},this.loggedIn=!0,this.data=t.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve(t)}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}},async loginWithFacebook(){try{this.is_loading=!0;const o=new _.FacebookAuthProvider,t=await this._signInWithProvider(o,"Facebook");if(t.user){const{uid:r,displayName:i,email:s,emailVerified:a,isAnonymous:l,phoneNumber:d,photoURL:c}=t.user;this.current_user={uid:r,displayName:i,email:s,emailVerified:a,isAnonymous:l,phoneNumber:d,photoURL:c},this.loggedIn=!0,this.data=t.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve(t)}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}},loginWithPhone(){},async loginWithSaml(){try{this.is_loading=!0;const o=new _.SAMLAuthProvider(this.config.saml_provider_id),t=await this._signInWithProvider(o,"SAML");if(t.user){const{uid:r,displayName:i,email:s,emailVerified:a,isAnonymous:l,phoneNumber:d,photoURL:c}=t.user;this.current_user={uid:r,displayName:i,email:s,emailVerified:a,isAnonymous:l,phoneNumber:d,photoURL:c},this.loggedIn=!0,this.data=t.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve(t)}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}},async textPhoneVerificationCode({phoneNumber:o,recaptchaVerifier:t}){try{this.is_loading=!0,this.text_confirmation=null;const r="+1"+o.replace(/\D/g,""),i=_.getAuth(this.config.firebase),s=await _.signInWithPhoneNumber(i,r,t);return this.is_loading=!1,this.sign_by_phone_step=2,this.text_confirmation=s,Promise.resolve(s)}catch(r){return this.error=r,this.is_loading=!1,Promise.reject(r)}},async confirmCode(o){try{if(this.is_loading=!0,!this.text_confirmation)throw new Error("No confirmation result available");const t=Array.isArray(o)?o.join(""):o;this.config.debug&&console.log("confirmationCode",t);const r=await this.text_confirmation.confirm(t);if(r.user){const{uid:i,displayName:s,email:a,emailVerified:l,isAnonymous:d,phoneNumber:c,photoURL:h}=r.user;this.current_user={uid:i,displayName:s,email:a,emailVerified:l,isAnonymous:d,phoneNumber:c,photoURL:h},this.loggedIn=!0,this.data=r.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,this.sign_by_phone_step=1,Promise.resolve(r)}catch(t){return this.error=t,this.is_loading=!1,this.sign_by_phone_step=1,Promise.reject(t)}},async registerUser(o,t,r){try{this.is_loading=!0;const i=this.config.verification,s=_.getAuth(this.config.firebase);try{await _.createUserWithEmailAndPassword(s,t,r),this.config.debug&&console.log("User Account Created!")}catch(l){throw this.error=l,this.is_loading=!1,this.config.debug&&console.error("[ registerUser ]: Error occurred during creating user",l),l}await _.signInWithEmailAndPassword(s,t,r),this.current_user={...this.current_user,displayName:o},s.currentUser&&await _.updateProfile(s.currentUser,{displayName:o});const a=t.split("@")[1]||"XXX";(i===!0||Array.isArray(i)&&i.includes(a))&&s.currentUser&&await _.sendEmailVerification(s.currentUser),this.is_loading=!1}catch(i){this.error=i,this.is_loading=!1}},async emailPasswordResetLink(o){try{this.is_loading=!0;const t=_.getAuth(this.config.firebase);return await _.sendPasswordResetEmail(t,o),this.error=null,this.is_loading=!1,this.is_email_reset_password_link_sent=!0,Promise.resolve()}catch(t){return this.error=t,this.is_loading=!1,Promise.reject(t)}},async signOut(){try{const o=this.config.debug,t=_.getAuth(this.config.firebase);return o&&console.log("[ auth guard ]: signOut request"),await _.signOut(t),this.current_user=null,Promise.resolve()}catch(o){return this.error=o,Promise.reject(o)}},toggleAuthDialog(o){var t;o!==void 0?this.is_authguard_dialog_shown=o:this.is_authguard_dialog_shown=!this.is_authguard_dialog_shown,(t=this.config)!=null&&t.debug&&console.log("[ auth guard ]: dialog visibility set to",this.is_authguard_dialog_shown)},async sendVerificationEmail(){try{this.is_loading=!0;const o=_.getAuth(this.config.firebase);if(!o.currentUser)throw new Error("No authenticated user");return await _.sendEmailVerification(o.currentUser),this.is_loading=!1,this.is_email_verification_link_sent=!0,Promise.resolve()}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}}},T=X.defineStore("auth",{state:re,getters:ie,actions:se});var ae=Object.defineProperty,ne=(o,t,r)=>t in o?ae(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,$=(o,t,r)=>ne(o,typeof t!="symbol"?t+"":t,r);const G={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},j=(o,t,r)=>o.replaceAll(t,"").replace(r,".").replace("..",".").replace(/[^.\d]/g,""),K=(o,t,r)=>{var i;return new Intl.NumberFormat(((i=r.number)==null?void 0:i.locale)??"en",{minimumFractionDigits:o,maximumFractionDigits:t,roundingMode:"trunc"})},le=(o,t=!0,r)=>{var i,s,a,l;const d=((i=r.number)==null?void 0:i.unsigned)!==!0&&o.startsWith("-")?"-":"",c=((s=r.number)==null?void 0:s.fraction)??0;let h=K(0,c,r);const u=h.formatToParts(1000.12),m=((a=u.find(f=>f.type==="group"))==null?void 0:a.value)??" ",b=((l=u.find(f=>f.type==="decimal"))==null?void 0:l.value)??".",p=j(o,m,b);if(Number.isNaN(parseFloat(p)))return d;const n=p.split(".");if(n[1]!=null&&n[1].length>=1){const f=n[1].length<=c?n[1].length:c;h=K(f,c,r)}let g=h.format(parseFloat(p));return t?c>0&&p.endsWith(".")&&!p.slice(0,-1).includes(".")&&(g+=b):g=j(g,m,b),d+g};class ue{constructor(t={}){$(this,"opts",{}),$(this,"memo",new Map);const r={...t};if(r.tokens!=null){r.tokens=r.tokensReplace?{...r.tokens}:{...G,...r.tokens};for(const i of Object.values(r.tokens))typeof i.pattern=="string"&&(i.pattern=new RegExp(i.pattern))}else r.tokens=G;Array.isArray(r.mask)&&(r.mask.length>1?r.mask=[...r.mask].sort((i,s)=>i.length-s.length):r.mask=r.mask[0]??""),r.mask===""&&(r.mask=null),this.opts=r}masked(t){return this.process(String(t),this.findMask(String(t)))}unmasked(t){return this.process(String(t),this.findMask(String(t)),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const r=this.findMask(String(t));if(this.opts.mask==null||r==null)return!1;const i=this.process(String(t),r).length;return typeof this.opts.mask=="string"?i>=this.opts.mask.length:i>=r.length}findMask(t){const r=this.opts.mask;if(r==null)return null;if(typeof r=="string")return r;if(typeof r=="function")return r(t);const i=this.process(t,r.slice(-1).pop()??"",!1);return r.find(s=>this.process(t,s,!1).length>=i.length)??""}escapeMask(t){const r=[],i=[];return t.split("").forEach((s,a)=>{s==="!"&&t[a-1]!=="!"?i.push(a-i.length):r.push(s)}),{mask:r.join(""),escaped:i}}process(t,r,i=!0){if(this.opts.number!=null)return le(t,i,this.opts);if(r==null)return t;const s=`v=${t},mr=${r},m=${i?1:0}`;if(this.memo.has(s))return this.memo.get(s);const{mask:a,escaped:l}=this.escapeMask(r),d=[],c=this.opts.tokens!=null?this.opts.tokens:{},h=this.isReversed()?-1:1,u=this.isReversed()?"unshift":"push",m=this.isReversed()?0:a.length-1,b=this.isReversed()?()=>f>-1&&y>-1:()=>f<a.length&&y<t.length,p=C=>!this.isReversed()&&C<=m||this.isReversed()&&C>=m;let n,g=-1,f=this.isReversed()?a.length-1:0,y=this.isReversed()?t.length-1:0,k=!1;for(;b();){const C=a.charAt(f),w=c[C],A=(w==null?void 0:w.transform)!=null?w.transform(t.charAt(y)):t.charAt(y);if(!l.includes(f)&&w!=null?(A.match(w.pattern)!=null?(d[u](A),w.repeated?(g===-1?g=f:f===m&&f!==g&&(f=g-h),m===g&&(f-=h)):w.multiple&&(k=!0,f-=h),f+=h):w.multiple?k&&(f+=h,y-=h,k=!1):A===n?n=void 0:w.optional&&(f+=h,y-=h),y+=h):(i&&!this.isEager()&&d[u](C),A===C&&!this.isEager()?y+=h:n=C,this.isEager()||(f+=h)),this.isEager())for(;p(f)&&(c[a.charAt(f)]==null||l.includes(f));){if(i){if(d[u](a.charAt(f)),t.charAt(y)===a.charAt(f)){f+=h,y+=h;continue}}else a.charAt(f)===t.charAt(y)&&(y+=h);f+=h}}return this.memo.set(s,d.join("")),this.memo.get(s)}}const Y=o=>JSON.parse(o.replaceAll("'",'"')),ce=(o,t={})=>{const r={...t};o.dataset.maska!=null&&o.dataset.maska!==""&&(r.mask=de(o.dataset.maska)),o.dataset.maskaEager!=null&&(r.eager=D(o.dataset.maskaEager)),o.dataset.maskaReversed!=null&&(r.reversed=D(o.dataset.maskaReversed)),o.dataset.maskaTokensReplace!=null&&(r.tokensReplace=D(o.dataset.maskaTokensReplace)),o.dataset.maskaTokens!=null&&(r.tokens=he(o.dataset.maskaTokens));const i={};return o.dataset.maskaNumberLocale!=null&&(i.locale=o.dataset.maskaNumberLocale),o.dataset.maskaNumberFraction!=null&&(i.fraction=parseInt(o.dataset.maskaNumberFraction)),o.dataset.maskaNumberUnsigned!=null&&(i.unsigned=D(o.dataset.maskaNumberUnsigned)),(o.dataset.maskaNumber!=null||Object.values(i).length>0)&&(r.number=i),r},D=o=>o!==""?!!JSON.parse(o):!0,de=o=>o.startsWith("[")&&o.endsWith("]")?Y(o):o,he=o=>{if(o.startsWith("{")&&o.endsWith("}"))return Y(o);const t={};return o.split("|").forEach(r=>{const i=r.split(":");t[i[0]]={pattern:new RegExp(i[1]),optional:i[2]==="optional",multiple:i[2]==="multiple",repeated:i[2]==="repeated"}}),t};class me{constructor(t,r={}){$(this,"items",new Map),$(this,"eventAbortController"),$(this,"onInput",i=>{if(i instanceof CustomEvent&&i.type==="input"&&!i.isTrusted&&!i.bubbles)return;const s=i.target,a=this.items.get(s);if(a===void 0)return;const l="inputType"in i&&i.inputType.startsWith("delete"),d=a.isEager(),c=l&&d&&a.unmasked(s.value)===""?"":s.value;this.fixCursor(s,l,()=>this.setValue(s,c))}),this.options=r,this.eventAbortController=new AbortController,this.init(this.getInputs(t))}update(t={}){this.options={...t},this.init(Array.from(this.items.keys()))}updateValue(t){var r;t.value!==""&&t.value!==((r=this.processInput(t))==null?void 0:r.masked)&&this.setValue(t,t.value)}destroy(){this.eventAbortController.abort(),this.items.clear()}init(t){const r=this.getOptions(this.options);for(const i of t){if(!this.items.has(i)){const{signal:a}=this.eventAbortController;i.addEventListener("input",this.onInput,{capture:!0,signal:a})}const s=new ue(ce(i,r));this.items.set(i,s),queueMicrotask(()=>this.updateValue(i)),i.selectionStart===null&&s.isEager()&&console.warn("Maska: input of `%s` type is not supported",i.type)}}getInputs(t){return typeof t=="string"?Array.from(document.querySelectorAll(t)):"length"in t?Array.from(t):[t]}getOptions(t){const{onMaska:r,preProcess:i,postProcess:s,...a}=t;return a}fixCursor(t,r,i){var s,a;const l=t.selectionStart,d=t.value;if(i(),l===null||l===d.length&&!r)return;const c=t.value,h=d.slice(0,l),u=c.slice(0,l),m=(s=this.processInput(t,h))==null?void 0:s.unmasked,b=(a=this.processInput(t,u))==null?void 0:a.unmasked;if(m===void 0||b===void 0)return;let p=l;h!==u&&(p+=r?c.length-d.length:m.length-b.length),t.setSelectionRange(p,p)}setValue(t,r){const i=this.processInput(t,r);i!==void 0&&(t.value=i.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(s=>s(i)):this.options.onMaska(i)),t.dispatchEvent(new CustomEvent("maska",{detail:i})),t.dispatchEvent(new CustomEvent("input",{detail:i.masked})))}processInput(t,r){const i=this.items.get(t);if(i===void 0)return;let s=r??t.value;this.options.preProcess!=null&&(s=this.options.preProcess(s));let a=i.masked(s);return this.options.postProcess!=null&&(a=this.options.postProcess(a)),{masked:a,unmasked:i.unmasked(s),completed:i.completed(s)}}}const q=new WeakMap,ge=(o,t)=>{if(o.arg==null||o.instance==null)return;const r="setup"in o.instance.$.type;o.arg in o.instance?o.instance[o.arg]=t:r&&console.warn("Maska: please expose `%s` using defineExpose",o.arg)},fe=(o,t)=>{var r;const i=o instanceof HTMLInputElement?o:o.querySelector("input");if(i==null||(i==null?void 0:i.type)==="file")return;let s={};if(t.value!=null&&(s=typeof t.value=="string"?{mask:t.value}:{...t.value}),t.arg!=null){const a=l=>{const d=t.modifiers.unmasked?l.unmasked:t.modifiers.completed?l.completed:l.masked;ge(t,d)};s.onMaska=s.onMaska==null?a:Array.isArray(s.onMaska)?[...s.onMaska,a]:[s.onMaska,a]}q.has(i)?(r=q.get(i))==null||r.update(s):q.set(i,new me(i,s))},pe={debug:!1,store:null,router:null,firebase:null,session:"local",saml:!1,saml_text:"Login with SAML",saml_provider_id:"saml.okta",email:!0,phone:!1,google:!1,facebook:!1,title:"Authenticate",subtitle:"Firebase Vuetify Authentication NPM package",icon:"mdi-brightness-7",iconColor:"orange",verification:!1,registration:!0},Z=()=>{const o=T();if(!o.config)return;const{firebase:t,debug:r}=o.config,i=_.getAuth(t),s=(c,h)=>{r&&console.log(`[ auth guard ]: ${h}`,c?"authenticated":"not authenticated")},a=i.currentUser,l=!!a,d=o.isAuthenticated;l!==d&&(o.loggedIn=l,o.data=a,r&&console.log("[ auth guard ]: Auth state mismatch detected. Updated store:",{firebase:l,store:d,updated:o.loggedIn})),s(o.loggedIn,"Current auth state:")},O=e.defineComponent({__name:"AuthBranding",setup(o){const t=T(),r=e.computed(()=>t.config);return(i,s)=>(e.openBlock(),e.createBlock(H.VList,{lines:"two",dense:""},{default:e.withCtx(()=>[e.createVNode(H.VListItem,{title:r.value.title,subtitle:r.value.subtitle},{title:e.withCtx(()=>[e.createVNode(W.VIcon,{color:r.value.iconColor},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value.icon),1)]),_:1},8,["color"]),e.createTextVNode(" "+e.toDisplayString(r.value.title),1)]),_:1},8,["title","subtitle"])]),_:1}))}}),_e={class:"text-center pb-4"},ve=e.defineComponent({__name:"LoginCard",setup(o){const t=T(),{loginWithEmail:r,SET_PASSWORD_RESET_SCREEN_SHOWN:i,SET_REGISTER_SCREEN_SHOWN:s,SET_TAB:a}=t,l=e.computed(()=>t.config),d=e.computed(()=>t.error),c=e.computed(()=>t.is_session_persistant),h=e.computed(()=>t.sessionPersistence),u=e.computed(()=>t.getError),m=e.computed(()=>t.isUserRegistrationAllowed),b=e.computed(()=>t.isResetPasswordScreenShown),p=e.ref(""),n=e.ref(""),g=e.ref(!0),f=()=>{d.value=null},y=()=>{if(p.value&&n.value){const C={email:p.value,password:n.value};r(C),n.value=""}else{const C={code:"validation-error",message:"Email and password are required."};d.value=C,setTimeout(f,5e3)}},k=()=>{c.value=g.value};return e.onMounted(()=>{g.value=h.value==="LOCAL"}),e.watch(u,C=>{C&&setTimeout(f,5e3)}),(C,w)=>(e.openBlock(),e.createBlock(B.VContainer,null,{default:e.withCtx(()=>[e.createVNode(N.VCard,{flat:""},{default:e.withCtx(()=>[u.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,class:"my-3",type:"error",dismissible:"",transition:"fade-transition",onClick:f},{default:e.withCtx(()=>w[5]||(w[5]=[e.createTextVNode(" Provided credentials are invalid. ")])),_:1,__:[5]})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"}))]),_:1}),l.value.email?(e.openBlock(),e.createBlock(N.VCard,{key:0,flat:""},{default:e.withCtx(()=>[e.createElementVNode("form",{onSubmit:e.withModifiers(y,["prevent"])},[e.createVNode(N.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(I.VTextField,{modelValue:p.value,"onUpdate:modelValue":w[0]||(w[0]=A=>p.value=A),required:"",class:"mr-2",label:"Email",type:"email",name:"email",autocomplete:"email","prepend-icon":"mdi-account"},null,8,["modelValue"]),e.createVNode(I.VTextField,{modelValue:n.value,"onUpdate:modelValue":w[1]||(w[1]=A=>n.value=A),required:"",class:"mr-2",name:"password",type:"password",label:"Password",autocomplete:"current-password","prepend-icon":"mdi-lock"},null,8,["modelValue"]),e.createVNode(Q.VCheckbox,{modelValue:g.value,"onUpdate:modelValue":w[2]||(w[2]=A=>g.value=A),dense:"",class:"ml-8",name:"remember",label:"Remember Me",onChange:k},null,8,["modelValue"])]),_:1}),e.createElementVNode("div",_e,[!b.value&&m.value?(e.openBlock(),e.createBlock(x.VBtn,{key:0,variant:"text",size:"x-small",color:"primary",onClick:w[3]||(w[3]=A=>(e.unref(i)(!0),e.unref(a)(2)))},{default:e.withCtx(()=>w[6]||(w[6]=[e.createTextVNode(" Forgot Password? ")])),_:1,__:[6]})):(e.openBlock(),e.createBlock(x.VBtn,{key:1,variant:"text",size:"x-small",color:"primary",onClick:w[4]||(w[4]=A=>(e.unref(s)(!1),e.unref(a)(1)))},{default:e.withCtx(()=>w[7]||(w[7]=[e.createTextVNode(" Register as new user ")])),_:1,__:[7]}))]),e.createVNode(N.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(x.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",type:"submit"},{default:e.withCtx(()=>w[8]||(w[8]=[e.createTextVNode(" Login ")])),_:1,__:[8]})]),_:1})],32)]),_:1})):e.createCommentVNode("",!0)]),_:1}))}}),Ve=e.defineComponent({__name:"RegisterUser",setup(o){const t=T(),{registerUser:r}=t,i=e.computed(()=>t.getError),s=e.computed({get:()=>t.error,set:n=>{t.error=n}}),a=e.ref(""),l=e.ref(""),d=e.ref(""),c=e.ref(""),h=e.ref(!1),u=e.ref(null),m=e.computed(()=>({email:a.value?!0:"Email cannot be empty",password:l.value?!0:"Password cannot be empty",displayName:c.value?!0:"Name cannot be empty",confirm:l.value!==d.value?"Passwords do not match":!0})),b=()=>{s.value=null};e.watch(i,n=>{n&&setTimeout(b,5e3)});const p=()=>{var n;(n=u.value)!=null&&n.validate()&&r&&r(c.value,a.value,l.value)};return(n,g)=>(e.openBlock(),e.createBlock(B.VContainer,null,{default:e.withCtx(()=>[e.createVNode(N.VCard,{flat:""},{default:e.withCtx(()=>[e.createVNode(J.VForm,{ref_key:"form",ref:u,modelValue:h.value,"onUpdate:modelValue":g[4]||(g[4]=f=>h.value=f),onSubmit:e.withModifiers(p,["prevent"])},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,type:"error",dismissible:"",transition:"fade-transition",onClick:b},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value.message),1)]),_:1})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"})),e.createVNode(N.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(I.VTextField,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=f=>c.value=f),required:"",class:"mr-2",label:"Name","prepend-icon":"mdi-account",rules:[m.value.displayName]},null,8,["modelValue","rules"]),e.createVNode(I.VTextField,{modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=f=>a.value=f),required:"",class:"mr-2",label:"Email","prepend-icon":"mdi-email",rules:[m.value.email]},null,8,["modelValue","rules"]),e.createVNode(I.VTextField,{modelValue:l.value,"onUpdate:modelValue":g[2]||(g[2]=f=>l.value=f),autocomplete:"off",required:"",class:"mr-2",type:"password",label:"Password","prepend-icon":"mdi-lock",rules:[m.value.password]},null,8,["modelValue","rules"]),e.createVNode(I.VTextField,{modelValue:d.value,"onUpdate:modelValue":g[3]||(g[3]=f=>d.value=f),autocomplete:"off",required:"",class:"mr-2",type:"password",label:"Confirm password","prepend-icon":"mdi-lock",rules:[m.value.confirm]},null,8,["modelValue","rules"])]),_:1}),e.createVNode(N.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(x.VBtn,{block:"",large:"",depressed:"",color:"primary",type:"submit",disabled:!h.value},{default:e.withCtx(()=>g[5]||(g[5]=[e.createTextVNode(" Register ")])),_:1,__:[5]},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),ke={key:2},we=e.defineComponent({__name:"PasswordReset",setup(o){const t=T(),{emailPasswordResetLink:r,SET_PASSWORD_RESET_SCREEN_SHOWN:i}=t,s=e.computed({get:()=>t.error,set:p=>{t.error=p}}),a=e.computed(()=>t.is_loading),l=e.computed(()=>t.getError),d=e.computed(()=>t.isEmailResetPasswordLinkSent),c=e.ref(""),h=e.ref(!1),u=e.computed(()=>({email:c.value===""?"Email cannot be empty":!0})),m=()=>{s.value=null},b=()=>{c.value?r(c.value):(s.value={message:"Email cannot be empty"},setTimeout(m,5e3))};return(p,n)=>(e.openBlock(),e.createBlock(B.VContainer,null,{default:e.withCtx(()=>[e.createVNode(N.VCard,{flat:""},{default:e.withCtx(()=>[e.createVNode(J.VForm,{ref:"form",modelValue:h.value,"onUpdate:modelValue":n[3]||(n[3]=g=>h.value=g),onSubmit:n[4]||(n[4]=e.withModifiers(g=>b(c.value),["prevent"]))},{default:e.withCtx(()=>[l.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,type:"error",dismissible:"",onClick:n[0]||(n[0]=g=>s.value=null)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value.message),1)]),_:1})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"})),d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ke,[e.createVNode(N.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[n[5]||(n[5]=e.createElementVNode("div",{class:"mb-5"}," Enter registered user email address and we will send you a link to reset your password. ",-1)),e.createVNode(I.VTextField,{modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=g=>c.value=g),required:"",error:!!l.value,class:"mr-2",label:"Email","prepend-icon":"mdi-account",rules:[u.value.email]},null,8,["modelValue","error","rules"])]),_:1,__:[5]}),e.createVNode(N.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(x.VBtn,{block:"",depressed:"",color:"primary",type:"submit",size:"large",disabled:a.value},{default:e.withCtx(()=>n[6]||(n[6]=[e.createTextVNode(" Email Password Reset Link ")])),_:1,__:[6]},8,["disabled"])]),_:1})])),d.value?(e.openBlock(),e.createBlock(B.VContainer,{key:3,class:"pa-4 text-center"},{default:e.withCtx(()=>[e.createVNode(N.VCardText,{class:"text-h5"},{default:e.withCtx(()=>n[7]||(n[7]=[e.createTextVNode(" Email has been sent! ")])),_:1,__:[7]}),e.createVNode(N.VCardText,null,{default:e.withCtx(()=>n[8]||(n[8]=[e.createTextVNode("Please check your inbox and follow the instructions in the email to reset your account password")])),_:1,__:[8]}),e.createVNode(N.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(x.VBtn,{block:"",large:"",depressed:"",color:"primary",onClick:n[2]||(n[2]=g=>e.unref(i)(!1))},{default:e.withCtx(()=>n[9]||(n[9]=[e.createTextVNode(" Login ")])),_:1,__:[9]})]),_:1})]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),be={class:"text-center pb-4"},ye={class:"text-center pb-4"},Ce="#",Ne=e.defineComponent({__name:"LoginWithPhone",setup(o){const t=e.ref(!1),r=e.ref(Array(6).fill("")),i=e.ref("");let s=null;const a=T(),{textPhoneVerificationCode:l,confirmCode:d,SET_SHOW_LOGIN_WITH_PHONE:c}=a,h=e.computed({get:()=>a.error,set:v=>{a.error=v}}),u=e.computed(()=>a.sign_by_phone_step),m=e.computed(()=>a.getError),b=e.computed(()=>a.config),p=e.ref([]),n=e.computed(()=>({phoneNumber:i.value.replace(/\D/g,"").length<10?"Please enter a valid US phone number":!0})),g=async()=>{try{if(s||(console.log("[LoginWithPhone]: Initializing reCAPTCHA..."),await C()),s){const v={phoneNumber:i.value,recaptchaVerifier:s};l(v)}else console.error("[LoginWithPhone]: Failed to initialize reCAPTCHA. Please check:"),console.error("1. Phone authentication is enabled in Firebase Console"),console.error("2. Your Firebase configuration is correct"),h.value={message:"Failed to initialize phone authentication. Please try again."}}catch(v){console.error("[LoginWithPhone]: Error in phone verification:",v),h.value=v}},f=()=>{d(r.value)},y=()=>{let v=i.value.replace(/\D/g,"");v.length>=6?v=`(${v.slice(0,3)}) ${v.slice(3,6)}-${v.slice(6,10)}`:v.length>=3&&(v=`(${v.slice(0,3)}) ${v.slice(3)}`),i.value=v},k=()=>{console.log("Back button clicked"),i.value="",r.value=Array(6).fill(""),c(!1)},C=async()=>{var v;try{if(!s&&b.value&&b.value.firebase){if(!document.getElementById("recaptcha-container")){console.error("[LoginWithPhone]: recaptcha-container element not found");const E=document.createElement("div");E.id="recaptcha-container",document.body.appendChild(E)}const S=_.getAuth(b.value.firebase);await new Promise(E=>setTimeout(E,100));try{s=new _.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:()=>{console.log("[LoginWithPhone]: reCAPTCHA solved")}},S),console.log("[LoginWithPhone]: RecaptchaVerifier created successfully")}catch(E){console.error("[LoginWithPhone]: Error creating RecaptchaVerifier:",E),(v=E.message)!=null&&v.includes("appVerificationDisabledForTesting")&&(console.error("[LoginWithPhone]: This error often occurs when:"),console.error("1. Phone authentication is not enabled in Firebase Console"),console.error("2. Firebase Auth is not properly initialized"),console.error("3. There's a version mismatch in Firebase SDK"))}}}catch(V){console.error("[LoginWithPhone]: Error in recaptcha initialization:",V)}};e.onUnmounted(()=>{if(s)try{s.clear(),s=null}catch(v){console.error("[LoginWithPhone]: Error clearing RecaptchaVerifier:",v)}});const w=v=>{var E,P,L;(((E=v.clipboardData)==null?void 0:E.getData("text").substr(0,6))??"").split("").forEach((F,z)=>{z<r.value.length&&(r.value[z]=F)});const S=r.value.findIndex(F=>!F);S!==-1&&p.value[S]?(P=p.value[S])==null||P.focus():p.value[r.value.length-1]&&((L=p.value[r.value.length-1])==null||L.focus())},A=(v,V)=>{var E;let S=v;if(V.key==="Backspace"||V.key==="ArrowLeft")S=v>0?v-1:0,V.key==="Backspace"&&v>0&&(r.value[v]="");else if(/^[0-9]$/.test(V.key)||V.key==="ArrowRight"){if(/^[0-9]$/.test(V.key)&&v<r.value.length-1){e.nextTick(()=>{var P;p.value[v+1]&&((P=p.value[v+1])==null||P.focus())});return}S=v<r.value.length-1?v+1:v}p.value[S]&&((E=p.value[S])==null||E.focus())};return(v,V)=>{const S=e.resolveDirective("maska");return e.openBlock(),e.createBlock(B.VContainer,null,{default:e.withCtx(()=>[V[10]||(V[10]=e.createElementVNode("div",{id:"recaptcha-container"},null,-1)),e.createVNode(N.VCard,{flat:""},{default:e.withCtx(()=>[m.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,class:"my-3",type:"error",dismissible:"",transition:"fade-transition",onClick:V[0]||(V[0]=E=>h.value=null)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value.message),1)]),_:1})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"}))]),_:1}),u.value===1?(e.openBlock(),e.createBlock(N.VCard,{key:0,flat:""},{default:e.withCtx(()=>[e.createElementVNode("form",{onSubmit:e.withModifiers(g,["prevent"])},[e.createVNode(N.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(I.VTextField,{modelValue:i.value,"onUpdate:modelValue":V[1]||(V[1]=E=>i.value=E),required:"",class:"mr-2",autocomplete:"off",label:"Phone Number","prepend-icon":"mdi-cellphone",prefix:"+1",placeholder:"(555) 123-4567",rules:[n.value.phoneNumber],onInput:y},null,8,["modelValue","rules"]),V[2]||(V[2]=e.createElementVNode("div",{style:{height:"56px"}},null,-1)),V[3]||(V[3]=e.createElementVNode("div",{style:{height:"40px"}},null,-1))]),_:1,__:[2,3]}),e.createElementVNode("div",be,[e.createVNode(x.VBtn,{variant:"text",size:"x-small",color:"primary",onClick:k},{default:e.withCtx(()=>V[4]||(V[4]=[e.createTextVNode(" Sign In with email ")])),_:1,__:[4]})]),e.createVNode(N.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(x.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",type:"submit",disabled:!t.value},{default:e.withCtx(()=>V[5]||(V[5]=[e.createTextVNode(" Send Code ")])),_:1,__:[5]},8,["disabled"])]),_:1})],32)]),_:1})):e.createCommentVNode("",!0),u.value===2?(e.openBlock(),e.createBlock(N.VCard,{key:1,flat:""},{default:e.withCtx(()=>[e.createVNode(N.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[V[6]||(V[6]=e.createElementVNode("p",{class:"text-center text-body-2 text-medium-emphasis mb-4"},[e.createTextVNode(" Enter the confirmation code"),e.createElementVNode("br"),e.createTextVNode(" sent to your mobile phone ")],-1)),e.createVNode(B.VRow,{class:"centered-input"},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,(E,P)=>e.createVNode(B.VCol,{key:P,cols:"2"},{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createBlock(I.VTextField,{ref_for:!0,ref:L=>p.value[P]=L,key:P,modelValue:r.value[P],"onUpdate:modelValue":L=>r.value[P]=L,variant:"outlined",maxlength:"1","hide-details":"",onKeyup:L=>A(P,L),onPaste:w},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[S,Ce]])]),_:2},1024)),64))]),_:1}),V[7]||(V[7]=e.createElementVNode("div",{style:{height:"40px"}},null,-1))]),_:1,__:[6,7]}),e.createElementVNode("div",ye,[e.createVNode(x.VBtn,{variant:"text",size:"x-small",color:"primary",onClick:k},{default:e.withCtx(()=>V[8]||(V[8]=[e.createTextVNode(" Sign In with email ")])),_:1,__:[8]})]),e.createVNode(N.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(x.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",disabled:r.value.join("").length<6,onClick:f},{default:e.withCtx(()=>V[9]||(V[9]=[e.createTextVNode(" Confirm Code ")])),_:1,__:[9]},8,["disabled"])]),_:1})]),_:1})):e.createCommentVNode("",!0)]),_:1,__:[10]})}}}),xe=(o,t)=>{const r=o.__vccOpts||o;for(const[i,s]of t)r[i]=s;return r},Ee=xe(Ne,[["__scopeId","data-v-653c13d3"]]),Ae={key:0},Se={key:1},Pe={key:0},Be={key:1},Te={key:2},Re={key:3},Ie=e.defineComponent({__name:"EmailVerification",setup(o){const t=T(),{is_loading:r,signOut:i,sendVerificationEmail:s,SET_EMAIL_VERIFICATION_SCREEN_SHOWN:a}=t,l=e.computed({get:()=>t.error,set:p=>{t.error=p}}),d=e.computed(()=>t.getError),c=e.computed(()=>t.isAuthenticated),h=e.computed(()=>t.isEmailResetPasswordLinkSent),u=e.computed(()=>t.isEmailVerificationLinkSent),m=()=>{l.value=null},b=()=>{s()};return e.watch(d,p=>{p&&setTimeout(m,5e3)}),(p,n)=>(e.openBlock(),e.createBlock(B.VContainer,null,{default:e.withCtx(()=>[e.createVNode(N.VCard,{flat:"",class:"text-center pa-5"},{default:e.withCtx(()=>[d.value?(e.openBlock(),e.createElementBlock("div",Ae,[n[4]||(n[4]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Error!",-1)),d.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,type:"error",dismissible:"",transition:"fade-transition",onClick:m},{default:e.withCtx(()=>{var g;return[e.createTextVNode(e.toDisplayString((g=d.value)==null?void 0:g.message),1)]}),_:1})):e.createCommentVNode("",!0),e.createVNode(x.VBtn,{class:"mt-2",color:"primary",onClick:n[0]||(n[0]=g=>e.unref(a)(!1))},{default:e.withCtx(()=>n[3]||(n[3]=[e.createTextVNode(" Back to Login ")])),_:1,__:[3]})])):(e.openBlock(),e.createElementBlock("div",Se,[u.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Pe,[n[6]||(n[6]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Verification Required",-1)),e.createVNode(W.VIcon,{size:"100",color:"grey",class:"ma-4"},{default:e.withCtx(()=>n[5]||(n[5]=[e.createTextVNode("mdi-account")])),_:1,__:[5]})])),u.value?(e.openBlock(),e.createElementBlock("div",Be,[n[8]||(n[8]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Email Sent!",-1)),e.createVNode(W.VIcon,{size:"100",color:"grey",class:"ma-4"},{default:e.withCtx(()=>n[7]||(n[7]=[e.createTextVNode("mdi-email")])),_:1,__:[7]})])):e.createCommentVNode("",!0),n[15]||(n[15]=e.createElementVNode("div",{class:"text-grey-darken-2 mb-7 body-2"},[e.createElementVNode("p",null," Please check your email to verify your address. Click the link in the email we've sent you to confirm your account access. ")],-1)),h.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Te,[n[10]||(n[10]=e.createElementVNode("p",{class:"text-grey-darken-2 mb-7 body-2"},[e.createTextVNode(" If you have not received a verification email,"),e.createElementVNode("br"),e.createTextVNode("click the button below. ")],-1)),e.createVNode(x.VBtn,{disabled:e.unref(r),color:"primary",onClick:b},{default:e.withCtx(()=>n[9]||(n[9]=[e.createTextVNode(" Send Verification Email ")])),_:1,__:[9]},8,["disabled"])])),h.value?(e.openBlock(),e.createElementBlock("div",Re,[e.createVNode(x.VBtn,{color:"primary",onClick:n[1]||(n[1]=g=>e.unref(a)(!1))},{default:e.withCtx(()=>n[11]||(n[11]=[e.createTextVNode(" Back to Login ")])),_:1,__:[11]})])):e.createCommentVNode("",!0),e.createVNode(B.VContainer,null,{default:e.withCtx(()=>[n[14]||(n[14]=e.createElementVNode("div",{class:"caption mb-2"},"- or -",-1)),c.value?(e.openBlock(),e.createBlock(x.VBtn,{key:0,color:"primary",variant:"outlined",onClick:e.unref(i)},{default:e.withCtx(()=>n[12]||(n[12]=[e.createTextVNode(" Sign Out ")])),_:1,__:[12]},8,["onClick"])):(e.openBlock(),e.createBlock(x.VBtn,{key:1,color:"primary",variant:"outlined",onClick:n[2]||(n[2]=g=>e.unref(a)(!1))},{default:e.withCtx(()=>n[13]||(n[13]=[e.createTextVNode(" Sign In ")])),_:1,__:[13]}))]),_:1,__:[14]})]))]),_:1})]),_:1}))}}),Le={class:"caption"},We={key:0},$e={key:0,class:"ml-2"},Ue=e.defineComponent({__name:"LoginWithProvider",setup(o){const t=T(),{loginWithGoogle:r,loginWithFacebook:i,loginWithSaml:s,SET_SHOW_LOGIN_WITH_PHONE:a}=t,l=e.computed(()=>t.config),d=e.computed(()=>t.isLoginWithProvidersActive),c=e.computed(()=>t.isOnlySingleProvider);return(h,u)=>d.value?(e.openBlock(),e.createBlock(B.VContainer,{key:0,class:"text-center ma-0 pa-0"},{default:e.withCtx(()=>[e.createElementVNode("div",Le,[l.value.email?(e.openBlock(),e.createElementBlock("span",We,"or ")):e.createCommentVNode("",!0),u[4]||(u[4]=e.createTextVNode("login with"))]),e.createVNode(B.VContainer,null,{default:e.withCtx(()=>[l.value.google?(e.openBlock(),e.createBlock(x.VBtn,{key:0,class:"mr-2",color:"#db3236",variant:"outlined",icon:!c.value,tooltip:"Authenticate with Gmail Account",onClick:u[0]||(u[0]=m=>e.unref(r)())},{default:e.withCtx(()=>[e.createVNode(W.VIcon,null,{default:e.withCtx(()=>u[5]||(u[5]=[e.createTextVNode("mdi-google")])),_:1,__:[5]}),e.createVNode(M.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Gmail Account"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),l.value.facebook?(e.openBlock(),e.createBlock(x.VBtn,{key:1,class:"mr-2",color:"#3b5998",variant:"outlined",icon:!c.value,onClick:u[1]||(u[1]=m=>e.unref(i)())},{default:e.withCtx(()=>[e.createVNode(W.VIcon,null,{default:e.withCtx(()=>u[6]||(u[6]=[e.createTextVNode("mdi-facebook")])),_:1,__:[6]}),e.createVNode(M.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Facebook Account"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),l.value.phone?(e.openBlock(),e.createBlock(x.VBtn,{key:2,class:"mr-2",color:"primary",variant:"outlined",icon:!c.value,onClick:u[2]||(u[2]=m=>e.unref(a)(!0))},{default:e.withCtx(()=>[e.createVNode(W.VIcon,null,{default:e.withCtx(()=>u[7]||(u[7]=[e.createTextVNode("mdi-cellphone")])),_:1,__:[7]}),e.createVNode(M.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Text Message To Your Phone"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),l.value.saml?(e.openBlock(),e.createBlock(x.VBtn,{key:3,color:"secondary",variant:"outlined",icon:!c.value,onClick:u[3]||(u[3]=m=>e.unref(s)())},{default:e.withCtx(()=>[e.createVNode(W.VIcon,null,{default:e.withCtx(()=>u[8]||(u[8]=[e.createTextVNode("mdi-onepassword")])),_:1,__:[8]}),c.value?(e.openBlock(),e.createElementBlock("span",$e,e.toDisplayString(l.value.saml_text),1)):e.createCommentVNode("",!0),e.createVNode(M.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with SAML provider"})]),_:1},8,["icon"])):e.createCommentVNode("",!0)]),_:1})]),_:1})):e.createCommentVNode("",!0)}}),Me={key:0},De={key:1},Oe={key:2},Fe=e.defineComponent({__name:"AuthGuard",setup(o){const t=T(),{initializeGuard:r}=t,i=e.computed(()=>t.tab),s=e.ref(0),a=e.computed(()=>t.config),l=e.computed(()=>t.is_loading),d=e.computed(()=>t.isLoginWithPhoneShown),c=e.computed(()=>t.isUserRegistrationAllowed),h=e.computed(()=>t.isResetPasswordScreenShown),u=e.computed(()=>t.isEmailVerificationScreenShown),m=e.computed(()=>t.is_authguard_dialog_persistent),b=ee.useRoute(),p=e.computed(()=>{var y;return((y=a.value)==null?void 0:y.debug)??!1}),n=e.computed(()=>b.path),g=e.computed({get:()=>t.init&&t.is_authguard_dialog_shown,set:y=>{t.is_authguard_dialog_shown=y,!y&&t.loginState&&f()}}),f=()=>{p.value&&console.log("[ auth guard ]: Dialog closed by user"),t.loginState=null};return e.onMounted(()=>{r()}),e.watch(n,(y,k)=>{typeof k>"u"||(p.value&&console.log("[ auth guard ]: vue router current route change: [",k,"] -> [",y,"]"),Z())}),(y,k)=>(e.openBlock(),e.createBlock(te.VDialog,{modelValue:g.value,"onUpdate:modelValue":k[3]||(k[3]=C=>g.value=C),persistent:m.value,"retain-focus":!1,"overlay-opacity":"0.95","content-class":"elevation-0"},{default:e.withCtx(()=>[e.createVNode(B.VContainer,{style:{"max-width":"500px"},class:"mb-5"},{default:e.withCtx(()=>[e.createVNode(N.VCard,{flat:"",outlined:"",style:{"min-height":"500px",display:"flex","flex-direction":"column"}},{default:e.withCtx(()=>[e.createVNode(oe.VProgressLinear,{indeterminate:l.value},null,8,["indeterminate"]),u.value?(e.openBlock(),e.createElementBlock("div",Me,[e.createVNode(Ie)])):d.value?(e.openBlock(),e.createElementBlock("div",De,[e.createVNode(R.VTabs,{modelValue:s.value,"onUpdate:modelValue":k[0]||(k[0]=C=>s.value=C),grow:""},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(R.VTab,{key:0,value:0},{default:e.withCtx(()=>k[4]||(k[4]=[e.createTextVNode(" Log in with Phone ")])),_:1,__:[4]}))]),_:1},8,["modelValue"]),e.createVNode(Ee)])):(e.openBlock(),e.createElementBlock("div",Oe,[e.createVNode(R.VTabs,{modelValue:i.value,"onUpdate:modelValue":k[1]||(k[1]=C=>i.value=C),grow:""},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(R.VTab,{key:0,value:0},{default:e.withCtx(()=>k[5]||(k[5]=[e.createTextVNode(" Sign In ")])),_:1,__:[5]})),e.withDirectives((e.openBlock(),e.createBlock(R.VTab,{key:1,value:1},{default:e.withCtx(()=>k[6]||(k[6]=[e.createTextVNode(" Register ")])),_:1,__:[6]})),[[e.vShow,!h.value&&c.value]]),e.withDirectives((e.openBlock(),e.createBlock(R.VTab,{key:2,value:2},{default:e.withCtx(()=>k[7]||(k[7]=[e.createTextVNode(" Reset Password ")])),_:1,__:[7]})),[[e.vShow,(h.value||!c.value)&&a.value.email]])]),_:1},8,["modelValue"]),e.createVNode(N.VCardText,null,{default:e.withCtx(()=>[e.createVNode(R.VTabsWindow,{modelValue:i.value,"onUpdate:modelValue":k[2]||(k[2]=C=>i.value=C)},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:0,value:0,class:"pt--1"},{default:e.withCtx(()=>[e.createVNode(ve)]),_:1})),(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:1,value:1,class:"pt-5"},{default:e.withCtx(()=>[e.createVNode(Ve)]),_:1})),(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:2,value:2},{default:e.withCtx(()=>[e.createVNode(we)]),_:1}))]),_:1},8,["modelValue"])]),_:1})])),!u.value&&!d.value?(e.openBlock(),e.createBlock(N.VCardActions,{key:3},{default:e.withCtx(()=>[e.createVNode(Ue)]),_:1})):e.createCommentVNode("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]))}}),qe=async(o,t,r)=>{var a;const i=T(),s=((a=i.config)==null?void 0:a.debug)??!1;if(o.matched.some(l=>l.meta.requiresAuth))if(s&&console.log("[ auth guard ]: Route requires authentication. Evaluating..."),i.routesInitialized===!1&&(await i.initializeGuard(),i.routesInitialized=!0),i.isAuthenticated)s&&console.log("[ auth guard ]: User is authenticated."),r();else{s&&console.log("[ auth guard ]: User not authenticated."),i.loginState=o.fullPath,i.SET_PASSWORD_RESET_SCREEN_SHOWN(!1),i.SET_EMAIL_VERIFICATION_SCREEN_SHOWN(!1);const l=!t.name,d=t.name&&!t.matched.some(c=>c.meta.requiresAuth);i.is_authguard_dialog_persistent=l||!d,s&&console.log("[ auth guard ]: Navigation context:",{isDirectAccess:l,hasPublicRoute:d,fromRoute:t.name,toRoute:o.name,dialogPersistent:i.is_authguard_dialog_persistent}),i.toggleAuthDialog(!0),s&&console.log("[ auth guard ]: Blocking navigation to protected route"),r(!1)}else r()},ze={install:(o,t={})=>{const r={...pe,...t},{firebase:i,debug:s,verification:a,router:l,session:d}=r,c=_.getAuth(i);let h=_.browserLocalPersistence;d==="browser"||d==="session"?h=_.browserSessionPersistence:d==="none"&&(h=_.browserSessionPersistence,s&&console.log("[ auth guard ]: 'none' persistence is interpreted as browserSessionPersistence for Firebase.")),_.setPersistence(c,h).then(()=>{s&&console.log(`[ auth guard ]: Firebase session persistence set to ${d}`)}).catch(m=>{s&&console.error("[ auth guard ]: Error setting Firebase session persistence:",m)}),s&&(console.log("[ auth guard ]: wrapper initialization..."),i===null&&console.error("[ auth guard ]: ERROR: firebase instance missing in AuthenticationGuard config!"),l===null&&console.error("[ auth guard ]: ERROR: router instance missing in AuthenticationGuard config!")),o.config.globalProperties.$pinia||(console.log("[ auth guard ]: pinia store not detected - creating..."),o.use(X.createPinia()));const u=T();u.config=r,_.getRedirectResult(c).then(m=>{if(s&&console.log("[ auth guard ]: Checking redirect result:",m),m&&m.user){s&&console.log("[ auth guard ]: Redirect auth successful");const{uid:b,displayName:p,email:n,emailVerified:g,isAnonymous:f,phoneNumber:y,photoURL:k}=m.user;u.current_user={uid:b,displayName:p,email:n,emailVerified:g,isAnonymous:f,phoneNumber:y,photoURL:k},u.loggedIn=!0,u.data=m.user,u.is_authguard_dialog_shown&&u.toggleAuthDialog(!1),u.loginState&&(s&&console.log("[ auth guard ]: Clearing loginState after redirect:",u.loginState),u.loginState=null)}else s&&console.log("[ auth guard ]: No redirect result or user")}).catch(m=>{s&&console.error("[ auth guard ]: Redirect auth error:",m),u.error=m}),_.onAuthStateChanged(c,m=>{const b=u.loggedIn,p=u.init;if(u.init=!0,u.current_user=m,u.loggedIn=!!m,m?u.data=m:(u.data=null,p&&b&&l.isReady().then(()=>{const n=l.currentRoute.value;n.matched.some(f=>f.meta.requiresAuth)&&(s&&console.log("[ auth guard ]: User signed out on protected route, showing auth dialog"),u.loginState=n.fullPath,u.SET_PASSWORD_RESET_SCREEN_SHOWN(!1),u.SET_EMAIL_VERIFICATION_SCREEN_SHOWN(!1),u.toggleAuthDialog(!0),u.is_authguard_dialog_persistent=!0)})),l.isReady().then(()=>{Z()}),m){s&&console.log("[ auth guard ]: auth state changed. User is Authenticated!"),u.is_authguard_dialog_shown&&(s&&console.log("[ auth guard ]: dialog visibility set to false"),u.toggleAuthDialog(!1)),u.loginState&&(s&&console.log("[ auth guard ]: Clearing loginState:",u.loginState),u.loginState=null);const n=c.currentUser;if(a&&n&&!n.emailVerified){const g=setInterval(async()=>{if(!c.currentUser){clearInterval(g);return}await c.currentUser.reload(),c.currentUser.emailVerified&&(clearInterval(g),window.location.reload())},3500)}}s&&console.log("[ auth guard ]: auth state changed. User ID: [",(m==null?void 0:m.uid)||null,"]")}),o.directive("maska",fe),o.component("AuthenticationGuard",Fe)}};exports.AuthMiddleware=qe;exports.default=ze;exports.useAuthStore=T;

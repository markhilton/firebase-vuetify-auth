(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".large-font>input[data-v-6de7752f]{font-size:1.5rem}.centered-input>input[data-v-6de7752f]{text-align:center;font-weight:700;font-size:1.5rem}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const z=require("pinia"),_=require("firebase/auth"),e=require("vue"),R=require("vuetify/components/VIcon"),q=require("vuetify/components/VList"),L=require("vuetify/components/VAlert"),N=require("vuetify/components/VBtn"),y=require("vuetify/components/VCard"),K=require("vuetify/components/VCheckbox"),C=require("vuetify/components/VGrid"),P=require("vuetify/components/VTextField"),D=require("vuetify/components/VForm"),U=require("vuetify/components/VTooltip"),Z=require("vue-router"),Y=require("vuetify/components/VDialog"),Q=require("vuetify/components/VProgressLinear"),B=require("vuetify/components/VTabs"),ee=()=>({config:null,error:null,current_user:null,text_confirmation:null,sign_by_phone_step:1,tab:0,init:!1,is_loading:!1,is_session_persistant:!0,is_login_with_phone_shown:!1,is_authguard_dialog_shown:!1,is_authguard_dialog_persistent:!0,is_email_verification_link_sent:!1,is_email_reset_password_link_sent:!1,is_email_verification_screen_shown:!1,is_reset_password_screen_shown:!1,is_route_public:!0,is_from_public_to_auth:!1}),te={getError:o=>o.error,sessionPersistence:o=>{var t;return((t=o.config)==null?void 0:t.sessionPersistence)||"LOCAL"},uid:o=>{var t;return((t=o.current_user)==null?void 0:t.uid)||null},email:o=>{var t;return((t=o.current_user)==null?void 0:t.email)||null},emailVerified:o=>{var t;return((t=o.current_user)==null?void 0:t.emailVerified)||!1},displayName:o=>{var t;return((t=o.current_user)==null?void 0:t.displayName)||null},getDisplayName:o=>{var t;return((t=o.current_user)==null?void 0:t.displayName)||null},photoURL:o=>{var t;return((t=o.current_user)==null?void 0:t.photoURL)||null},providerData:o=>{var t;return((t=o.current_user)==null?void 0:t.providerData)||[]},phoneNumber:o=>{var t;return((t=o.current_user)==null?void 0:t.phoneNumber)||null},isAuthenticated:o=>o.loggedIn,isReady:o=>o.routesInitialized,isAnonymous:o=>{var t;return((t=o.current_user)==null?void 0:t.isAnonymous)||!1},requiresEmailVerification:o=>{var t,r,s;if((t=o.config)!=null&&t.requireEmailVerification&&!((r=o.current_user)!=null&&r.emailVerified)){const i=o.config.allowedDomains,n=(s=o.current_user)==null?void 0:s.email;if(i!=null&&i.length&&n){const l=n.split("@")[1];return i.includes(l)}return!0}return!1},isDomainAllowed:o=>{var i,n;const t=(i=o.config)==null?void 0:i.allowedDomains;if(!(t!=null&&t.length))return!0;const r=(n=o.current_user)==null?void 0:n.email;if(!r)return!0;const s=r.split("@")[1];return t.includes(s)},isUserAllowed:o=>{var s,i;const t=(s=o.config)==null?void 0:s.allowedUsers;if(!(t!=null&&t.length))return!0;const r=(i=o.current_user)==null?void 0:i.email;return r?t.includes(r):!1},hasProvider:o=>t=>{var r,s;return((s=(r=o.current_user)==null?void 0:r.providerData)==null?void 0:s.some(i=>i.providerId===t))||!1},hasPasswordProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(s=>s.providerId==="password"))||!1},hasPhoneProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(s=>s.providerId==="phone"))||!1},hasSocialProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(s=>["google.com","facebook.com","saml"].includes(s.providerId)))||!1},isOnlySingleProvider:o=>{const t=o.config;return t?[t.google,t.facebook,t.email,t.phone,t.saml].filter(Boolean).length===1:!1},isUserRegistrationAllowed:o=>{var t;return((t=o.config)==null?void 0:t.registration)??!0},isResetPasswordScreenShown:o=>o.is_reset_password_screen_shown,isLoginWithPhoneShown:o=>o.is_login_with_phone_shown,isEmailVerificationScreenShown:o=>o.is_email_verification_screen_shown,isEmailVerificationLinkSent:o=>o.is_email_verification_link_sent,isEmailResetPasswordLinkSent:o=>o.is_email_reset_password_link_sent,getAuthGuardDialogPersistence:o=>o.is_authguard_dialog_persistent,isLoginWithProvidersActive:o=>{const t=o.config;return t?!!(t.google||t.facebook||t.saml||t.phone):!1}},oe={SET_TAB(o){this.tab=o},SET_EMAIL_VERIFICATION_SCREEN_SHOWN(o){this.is_email_verification_screen_shown=o,o===!1&&(this.error=null)},SET_REGISTER_SCREEN_SHOWN(o){this.tab=o?0:1,this.is_reset_password_screen_shown=o},SET_PASSWORD_RESET_SCREEN_SHOWN(o){this.tab=o?1:0,this.is_reset_password_screen_shown=o,o===!1&&(this.is_email_reset_password_link_sent=!1)},SET_SHOW_LOGIN_WITH_PHONE(o){this.tab=0,this.is_login_with_phone_shown=o,o===!1&&(this.sign_by_phone_step=1)},async initializeGuard(){const o=this.config.debug,t=_.getAuth(this.config.firebase);o&&console.log("[ auth guard ]: component initialization");const r=t.currentUser;if(r){const{uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}=r;this.current_user={uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}}else this.current_user=null;return t.onAuthStateChanged(s=>{if(s){const{uid:i,displayName:n,email:l,emailVerified:c,isAnonymous:u,phoneNumber:d,photoURL:f}=s;this.current_user={uid:i,displayName:n,email:l,emailVerified:c,isAnonymous:u,phoneNumber:d,photoURL:f}}else this.current_user=null;o&&console.log("[ auth guard ]: auth state changed",s?"user logged in":"user logged out")}),Promise.resolve()},async loginWithEmail({email:o,password:t}){try{const r=_.getAuth(this.config.firebase);this.is_loading=!0,await _.signOut(r),this.is_session_persistant?await _.setPersistence(r,_.browserLocalPersistence):await _.setPersistence(r,_.browserSessionPersistence);const s=await _.signInWithEmailAndPassword(r,o,t);if(s.user){const{uid:i,displayName:n,email:l,emailVerified:c,isAnonymous:u,phoneNumber:d,photoURL:f}=s.user;this.current_user={uid:i,displayName:n,email:l,emailVerified:c,isAnonymous:u,phoneNumber:d,photoURL:f}}return this.is_loading=!1,Promise.resolve()}catch(r){return this.error=r,this.is_loading=!1,Promise.reject(r)}},async loginWithGoogle(){try{const o=new _.GoogleAuthProvider,t=_.getAuth(this.config.firebase),r=await _.signInWithPopup(t,o);if(r.user){const{uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}=r.user;this.current_user={uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}}return Promise.resolve(r)}catch(o){return this.error=o,Promise.reject(o)}},async loginWithFacebook(){try{const o=new _.FacebookAuthProvider,t=_.getAuth(this.config.firebase),r=await _.signInWithPopup(t,o);if(r.user){const{uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}=r.user;this.current_user={uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}}return Promise.resolve(r)}catch(o){return this.error=o,Promise.reject(o)}},loginWithPhone(){},async loginWithSaml(){try{const o=new _.SAMLAuthProvider(this.config.saml_provider_id),t=_.getAuth(this.config.firebase),r=await _.signInWithPopup(t,o);if(r.user){const{uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}=r.user;this.current_user={uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}}return Promise.resolve(r)}catch(o){return this.error=o,Promise.reject(o)}},async textPhoneVerificationCode({phoneNumber:o,recaptchaVerifier:t}){try{this.is_loading=!0,this.text_confirmation=null;const r="+1"+o.replace(/\D/g,""),s=_.getAuth(this.config.firebase),i=await _.signInWithPhoneNumber(s,r,t);return this.is_loading=!1,this.sign_by_phone_step=2,this.text_confirmation=i,Promise.resolve(i)}catch(r){return this.error=r,this.is_loading=!1,Promise.reject(r)}},async confirmCode(o){try{if(this.is_loading=!0,!this.text_confirmation)throw new Error("No confirmation result available");const t=Array.isArray(o)?o.join(""):o;this.config.debug&&console.log("confirmationCode",t);const r=await this.text_confirmation.confirm(t);if(r.user){const{uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}=r.user;this.current_user={uid:s,displayName:i,email:n,emailVerified:l,isAnonymous:c,phoneNumber:u,photoURL:d}}return this.is_loading=!1,this.sign_by_phone_step=1,Promise.resolve(r)}catch(t){return this.error=t,this.is_loading=!1,this.sign_by_phone_step=1,Promise.reject(t)}},async registerUser(o,t,r){try{this.is_loading=!0;const s=this.config.verification,i=_.getAuth(this.config.firebase);try{await _.createUserWithEmailAndPassword(i,t,r),this.config.debug&&console.log("User Account Created!")}catch(l){throw this.error=l,this.is_loading=!1,this.config.debug&&console.error("[ registerUser ]: Error occurred during creating user",l),l}await _.signInWithEmailAndPassword(i,t,r),this.current_user={...this.current_user,displayName:o},i.currentUser&&await _.updateProfile(i.currentUser,{displayName:o});const n=t.split("@")[1]||"XXX";(s===!0||Array.isArray(s)&&s.includes(n))&&i.currentUser&&await _.sendEmailVerification(i.currentUser),this.is_loading=!1}catch(s){this.error=s,this.is_loading=!1}},async emailPasswordResetLink(o){try{this.is_loading=!0;const t=_.getAuth(this.config.firebase);return await _.sendPasswordResetEmail(t,o),this.error=null,this.is_loading=!1,this.is_email_reset_password_link_sent=!0,Promise.resolve()}catch(t){return this.error=t,this.is_loading=!1,Promise.reject(t)}},async signOut(){try{const o=this.config.debug,t=_.getAuth(this.config.firebase);return o&&console.log("[ auth guard ]: signOut request"),await _.signOut(t),this.current_user=null,Promise.resolve()}catch(o){return this.error=o,Promise.reject(o)}},toggleAuthDialog(o){var t;o!==void 0?this.is_authguard_dialog_shown=o:this.is_authguard_dialog_shown=!this.is_authguard_dialog_shown,(t=this.config)!=null&&t.debug&&console.log("[ auth guard ]: dialog visibility set to",this.is_authguard_dialog_shown)},async sendVerificationEmail(){try{this.is_loading=!0;const o=_.getAuth(this.config.firebase);if(!o.currentUser)throw new Error("No authenticated user");return await _.sendEmailVerification(o.currentUser),this.is_loading=!1,this.is_email_verification_link_sent=!0,Promise.resolve()}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}}},A=z.defineStore("auth",{state:ee,getters:te,actions:oe});var re=Object.defineProperty,se=(o,t,r)=>t in o?re(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,I=(o,t,r)=>se(o,typeof t!="symbol"?t+"":t,r);const H={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},G=(o,t,r)=>o.replaceAll(t,"").replace(r,".").replace("..",".").replace(/[^.\d]/g,""),j=(o,t,r)=>{var s;return new Intl.NumberFormat(((s=r.number)==null?void 0:s.locale)??"en",{minimumFractionDigits:o,maximumFractionDigits:t,roundingMode:"trunc"})},ie=(o,t=!0,r)=>{var s,i,n,l;const c=((s=r.number)==null?void 0:s.unsigned)!==!0&&o.startsWith("-")?"-":"",u=((i=r.number)==null?void 0:i.fraction)??0;let d=j(0,u,r);const f=d.formatToParts(1000.12),v=((n=f.find(p=>p.type==="group"))==null?void 0:n.value)??" ",w=((l=f.find(p=>p.type==="decimal"))==null?void 0:l.value)??".",g=G(o,v,w);if(Number.isNaN(parseFloat(g)))return c;const a=g.split(".");if(a[1]!=null&&a[1].length>=1){const p=a[1].length<=u?a[1].length:u;d=j(p,u,r)}let h=d.format(parseFloat(g));return t?u>0&&g.endsWith(".")&&!g.slice(0,-1).includes(".")&&(h+=w):h=G(h,v,w),c+h};class ne{constructor(t={}){I(this,"opts",{}),I(this,"memo",new Map);const r={...t};if(r.tokens!=null){r.tokens=r.tokensReplace?{...r.tokens}:{...H,...r.tokens};for(const s of Object.values(r.tokens))typeof s.pattern=="string"&&(s.pattern=new RegExp(s.pattern))}else r.tokens=H;Array.isArray(r.mask)&&(r.mask.length>1?r.mask=[...r.mask].sort((s,i)=>s.length-i.length):r.mask=r.mask[0]??""),r.mask===""&&(r.mask=null),this.opts=r}masked(t){return this.process(String(t),this.findMask(String(t)))}unmasked(t){return this.process(String(t),this.findMask(String(t)),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const r=this.findMask(String(t));if(this.opts.mask==null||r==null)return!1;const s=this.process(String(t),r).length;return typeof this.opts.mask=="string"?s>=this.opts.mask.length:s>=r.length}findMask(t){const r=this.opts.mask;if(r==null)return null;if(typeof r=="string")return r;if(typeof r=="function")return r(t);const s=this.process(t,r.slice(-1).pop()??"",!1);return r.find(i=>this.process(t,i,!1).length>=s.length)??""}escapeMask(t){const r=[],s=[];return t.split("").forEach((i,n)=>{i==="!"&&t[n-1]!=="!"?s.push(n-s.length):r.push(i)}),{mask:r.join(""),escaped:s}}process(t,r,s=!0){if(this.opts.number!=null)return ie(t,s,this.opts);if(r==null)return t;const i=`v=${t},mr=${r},m=${s?1:0}`;if(this.memo.has(i))return this.memo.get(i);const{mask:n,escaped:l}=this.escapeMask(r),c=[],u=this.opts.tokens!=null?this.opts.tokens:{},d=this.isReversed()?-1:1,f=this.isReversed()?"unshift":"push",v=this.isReversed()?0:n.length-1,w=this.isReversed()?()=>p>-1&&k>-1:()=>p<n.length&&k<t.length,g=V=>!this.isReversed()&&V<=v||this.isReversed()&&V>=v;let a,h=-1,p=this.isReversed()?n.length-1:0,k=this.isReversed()?t.length-1:0,x=!1;for(;w();){const V=n.charAt(p),m=u[V],b=(m==null?void 0:m.transform)!=null?m.transform(t.charAt(k)):t.charAt(k);if(!l.includes(p)&&m!=null?(b.match(m.pattern)!=null?(c[f](b),m.repeated?(h===-1?h=p:p===v&&p!==h&&(p=h-d),v===h&&(p-=d)):m.multiple&&(x=!0,p-=d),p+=d):m.multiple?x&&(p+=d,k-=d,x=!1):b===a?a=void 0:m.optional&&(p+=d,k-=d),k+=d):(s&&!this.isEager()&&c[f](V),b===V&&!this.isEager()?k+=d:a=V,this.isEager()||(p+=d)),this.isEager())for(;g(p)&&(u[n.charAt(p)]==null||l.includes(p));){if(s){if(c[f](n.charAt(p)),t.charAt(k)===n.charAt(p)){p+=d,k+=d;continue}}else n.charAt(p)===t.charAt(k)&&(k+=d);p+=d}}return this.memo.set(i,c.join("")),this.memo.get(i)}}const X=o=>JSON.parse(o.replaceAll("'",'"')),ae=(o,t={})=>{const r={...t};o.dataset.maska!=null&&o.dataset.maska!==""&&(r.mask=le(o.dataset.maska)),o.dataset.maskaEager!=null&&(r.eager=W(o.dataset.maskaEager)),o.dataset.maskaReversed!=null&&(r.reversed=W(o.dataset.maskaReversed)),o.dataset.maskaTokensReplace!=null&&(r.tokensReplace=W(o.dataset.maskaTokensReplace)),o.dataset.maskaTokens!=null&&(r.tokens=ue(o.dataset.maskaTokens));const s={};return o.dataset.maskaNumberLocale!=null&&(s.locale=o.dataset.maskaNumberLocale),o.dataset.maskaNumberFraction!=null&&(s.fraction=parseInt(o.dataset.maskaNumberFraction)),o.dataset.maskaNumberUnsigned!=null&&(s.unsigned=W(o.dataset.maskaNumberUnsigned)),(o.dataset.maskaNumber!=null||Object.values(s).length>0)&&(r.number=s),r},W=o=>o!==""?!!JSON.parse(o):!0,le=o=>o.startsWith("[")&&o.endsWith("]")?X(o):o,ue=o=>{if(o.startsWith("{")&&o.endsWith("}"))return X(o);const t={};return o.split("|").forEach(r=>{const s=r.split(":");t[s[0]]={pattern:new RegExp(s[1]),optional:s[2]==="optional",multiple:s[2]==="multiple",repeated:s[2]==="repeated"}}),t};class ce{constructor(t,r={}){I(this,"items",new Map),I(this,"eventAbortController"),I(this,"onInput",s=>{if(s instanceof CustomEvent&&s.type==="input"&&!s.isTrusted&&!s.bubbles)return;const i=s.target,n=this.items.get(i);if(n===void 0)return;const l="inputType"in s&&s.inputType.startsWith("delete"),c=n.isEager(),u=l&&c&&n.unmasked(i.value)===""?"":i.value;this.fixCursor(i,l,()=>this.setValue(i,u))}),this.options=r,this.eventAbortController=new AbortController,this.init(this.getInputs(t))}update(t={}){this.options={...t},this.init(Array.from(this.items.keys()))}updateValue(t){var r;t.value!==""&&t.value!==((r=this.processInput(t))==null?void 0:r.masked)&&this.setValue(t,t.value)}destroy(){this.eventAbortController.abort(),this.items.clear()}init(t){const r=this.getOptions(this.options);for(const s of t){if(!this.items.has(s)){const{signal:n}=this.eventAbortController;s.addEventListener("input",this.onInput,{capture:!0,signal:n})}const i=new ne(ae(s,r));this.items.set(s,i),queueMicrotask(()=>this.updateValue(s)),s.selectionStart===null&&i.isEager()&&console.warn("Maska: input of `%s` type is not supported",s.type)}}getInputs(t){return typeof t=="string"?Array.from(document.querySelectorAll(t)):"length"in t?Array.from(t):[t]}getOptions(t){const{onMaska:r,preProcess:s,postProcess:i,...n}=t;return n}fixCursor(t,r,s){var i,n;const l=t.selectionStart,c=t.value;if(s(),l===null||l===c.length&&!r)return;const u=t.value,d=c.slice(0,l),f=u.slice(0,l),v=(i=this.processInput(t,d))==null?void 0:i.unmasked,w=(n=this.processInput(t,f))==null?void 0:n.unmasked;if(v===void 0||w===void 0)return;let g=l;d!==f&&(g+=r?u.length-c.length:v.length-w.length),t.setSelectionRange(g,g)}setValue(t,r){const s=this.processInput(t,r);s!==void 0&&(t.value=s.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(i=>i(s)):this.options.onMaska(s)),t.dispatchEvent(new CustomEvent("maska",{detail:s})),t.dispatchEvent(new CustomEvent("input",{detail:s.masked})))}processInput(t,r){const s=this.items.get(t);if(s===void 0)return;let i=r??t.value;this.options.preProcess!=null&&(i=this.options.preProcess(i));let n=s.masked(i);return this.options.postProcess!=null&&(n=this.options.postProcess(n)),{masked:n,unmasked:s.unmasked(i),completed:s.completed(i)}}}const O=new WeakMap,de=(o,t)=>{if(o.arg==null||o.instance==null)return;const r="setup"in o.instance.$.type;o.arg in o.instance?o.instance[o.arg]=t:r&&console.warn("Maska: please expose `%s` using defineExpose",o.arg)},me=(o,t)=>{var r;const s=o instanceof HTMLInputElement?o:o.querySelector("input");if(s==null||(s==null?void 0:s.type)==="file")return;let i={};if(t.value!=null&&(i=typeof t.value=="string"?{mask:t.value}:{...t.value}),t.arg!=null){const n=l=>{const c=t.modifiers.unmasked?l.unmasked:t.modifiers.completed?l.completed:l.masked;de(t,c)};i.onMaska=i.onMaska==null?n:Array.isArray(i.onMaska)?[...i.onMaska,n]:[i.onMaska,n]}O.has(s)?(r=O.get(s))==null||r.update(i):O.set(s,new ce(s,i))},pe={debug:!1,store:null,router:null,firebase:null,session:"local",saml:!1,saml_text:"Login with SAML",saml_provider_id:"saml.okta",email:!0,phone:!1,google:!1,facebook:!1,title:"Authenticate",subtitle:"Firebase Vuetify Authentication NPM package",icon:"mdi-brightness-7",iconColor:"orange",verification:!1,registration:!0},J=()=>{const o=A();if(!o.config)return;const{firebase:t,debug:r}=o.config,s=_.getAuth(t),i=(u,d)=>{r&&console.log(`[ auth guard ]: ${d}`,u?"authenticated":"not authenticated")},n=s.currentUser,l=!!n,c=o.isAuthenticated;l!==c&&(o.loggedIn=l,o.data=n,r&&console.log("[ auth guard ]: Auth state mismatch detected. Updated store:",{firebase:l,store:c,updated:o.loggedIn})),i(o.loggedIn,"Current auth state:")},$=e.defineComponent({__name:"AuthBranding",setup(o){const t=A(),r=e.computed(()=>t.config);return(s,i)=>(e.openBlock(),e.createBlock(q.VList,{lines:"two",dense:""},{default:e.withCtx(()=>[e.createVNode(q.VListItem,{title:r.value.title,subtitle:r.value.subtitle},{title:e.withCtx(()=>[e.createVNode(R.VIcon,{color:r.value.iconColor},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value.icon),1)]),_:1},8,["color"]),e.createTextVNode(" "+e.toDisplayString(r.value.title),1)]),_:1},8,["title","subtitle"])]),_:1}))}}),fe={class:"text-center pb-4"},he=e.defineComponent({__name:"LoginCard",setup(o){const t=A(),{loginWithEmail:r,SET_PASSWORD_RESET_SCREEN_SHOWN:s,SET_REGISTER_SCREEN_SHOWN:i,SET_TAB:n}=t,l=e.computed(()=>t.config),c=e.computed(()=>t.error),u=e.computed(()=>t.is_session_persistant),d=e.computed(()=>t.sessionPersistence),f=e.computed(()=>t.getError),v=e.computed(()=>t.isUserRegistrationAllowed),w=e.computed(()=>t.isResetPasswordScreenShown),g=e.ref(""),a=e.ref(""),h=e.ref(!0),p=()=>{c.value=null},k=()=>{if(g.value&&a.value){const V={email:g.value,password:a.value};r(V),a.value=""}else{const V={code:"validation-error",message:"Email and password are required."};c.value=V,setTimeout(p,5e3)}},x=()=>{u.value=h.value};return e.onMounted(()=>{h.value=d.value==="LOCAL"}),e.watch(f,V=>{V&&setTimeout(p,5e3)}),(V,m)=>(e.openBlock(),e.createBlock(C.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[f.value?(e.openBlock(),e.createBlock(L.VAlert,{key:0,class:"my-3",type:"error",dismissible:"",transition:"fade-transition",onClick:p},{default:e.withCtx(()=>m[5]||(m[5]=[e.createTextVNode(" Provided credentials are invalid. ")])),_:1,__:[5]})):(e.openBlock(),e.createBlock($,{key:1,class:"text-center"}))]),_:1}),l.value.email?(e.openBlock(),e.createBlock(y.VCard,{key:0,flat:""},{default:e.withCtx(()=>[e.createElementVNode("form",{onSubmit:e.withModifiers(k,["prevent"])},[e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(P.VTextField,{modelValue:g.value,"onUpdate:modelValue":m[0]||(m[0]=b=>g.value=b),required:"",class:"mr-2",label:"Email",type:"email",name:"email",autocomplete:"email","prepend-icon":"mdi-account"},null,8,["modelValue"]),e.createVNode(P.VTextField,{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=b=>a.value=b),required:"",class:"mr-2",name:"password",type:"password",label:"Password",autocomplete:"current-password","prepend-icon":"mdi-lock"},null,8,["modelValue"]),e.createVNode(K.VCheckbox,{modelValue:h.value,"onUpdate:modelValue":m[2]||(m[2]=b=>h.value=b),dense:"",class:"ml-8",name:"remember",label:"Remember Me",onChange:x},null,8,["modelValue"])]),_:1}),e.createElementVNode("div",fe,[!w.value&&v.value?(e.openBlock(),e.createBlock(N.VBtn,{key:0,variant:"text",size:"x-small",color:"primary",onClick:m[3]||(m[3]=b=>(e.unref(s)(!0),e.unref(n)(2)))},{default:e.withCtx(()=>m[6]||(m[6]=[e.createTextVNode(" Forgot Password? ")])),_:1,__:[6]})):(e.openBlock(),e.createBlock(N.VBtn,{key:1,variant:"text",size:"x-small",color:"primary",onClick:m[4]||(m[4]=b=>(e.unref(i)(!1),e.unref(n)(1)))},{default:e.withCtx(()=>m[7]||(m[7]=[e.createTextVNode(" Register as new user ")])),_:1,__:[7]}))]),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",type:"submit"},{default:e.withCtx(()=>m[8]||(m[8]=[e.createTextVNode(" Login ")])),_:1,__:[8]})]),_:1})],32)]),_:1})):e.createCommentVNode("",!0)]),_:1}))}}),ge=e.defineComponent({__name:"RegisterUser",setup(o){const t=A(),{registerUser:r}=t,s=e.computed(()=>t.getError),i=e.computed({get:()=>t.error,set:a=>{t.error=a}}),n=e.ref(""),l=e.ref(""),c=e.ref(""),u=e.ref(""),d=e.ref(!1),f=e.ref(null),v=e.computed(()=>({email:n.value?!0:"Email cannot be empty",password:l.value?!0:"Password cannot be empty",displayName:u.value?!0:"Name cannot be empty",confirm:l.value!==c.value?"Passwords do not match":!0})),w=()=>{i.value=null};e.watch(s,a=>{a&&setTimeout(w,5e3)});const g=()=>{var a;(a=f.value)!=null&&a.validate()&&r&&r(u.value,n.value,l.value)};return(a,h)=>(e.openBlock(),e.createBlock(C.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[e.createVNode(D.VForm,{ref_key:"form",ref:f,modelValue:d.value,"onUpdate:modelValue":h[4]||(h[4]=p=>d.value=p),onSubmit:e.withModifiers(g,["prevent"])},{default:e.withCtx(()=>[i.value?(e.openBlock(),e.createBlock(L.VAlert,{key:0,type:"error",dismissible:"",transition:"fade-transition",onClick:w},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value.message),1)]),_:1})):(e.openBlock(),e.createBlock($,{key:1,class:"text-center"})),e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(P.VTextField,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=p=>u.value=p),required:"",class:"mr-2",label:"Name","prepend-icon":"mdi-account",rules:[v.value.displayName]},null,8,["modelValue","rules"]),e.createVNode(P.VTextField,{modelValue:n.value,"onUpdate:modelValue":h[1]||(h[1]=p=>n.value=p),required:"",class:"mr-2",label:"Email","prepend-icon":"mdi-email",rules:[v.value.email]},null,8,["modelValue","rules"]),e.createVNode(P.VTextField,{modelValue:l.value,"onUpdate:modelValue":h[2]||(h[2]=p=>l.value=p),autocomplete:"off",required:"",class:"mr-2",type:"password",label:"Password","prepend-icon":"mdi-lock",rules:[v.value.password]},null,8,["modelValue","rules"]),e.createVNode(P.VTextField,{modelValue:c.value,"onUpdate:modelValue":h[3]||(h[3]=p=>c.value=p),autocomplete:"off",required:"",class:"mr-2",type:"password",label:"Confirm password","prepend-icon":"mdi-lock",rules:[v.value.confirm]},null,8,["modelValue","rules"])]),_:1}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",large:"",depressed:"",color:"primary",type:"submit",disabled:!d.value},{default:e.withCtx(()=>h[5]||(h[5]=[e.createTextVNode(" Register ")])),_:1,__:[5]},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),ve={key:2},_e=e.defineComponent({__name:"PasswordReset",setup(o){const t=A(),{emailPasswordResetLink:r,SET_PASSWORD_RESET_SCREEN_SHOWN:s}=t,i=e.computed({get:()=>t.error,set:g=>{t.error=g}}),n=e.computed(()=>t.is_loading),l=e.computed(()=>t.getError),c=e.computed(()=>t.isEmailResetPasswordLinkSent),u=e.ref(""),d=e.ref(!1),f=e.computed(()=>({email:u.value===""?"Email cannot be empty":!0})),v=()=>{i.value=null},w=()=>{u.value?r(u.value):(i.value={message:"Email cannot be empty"},setTimeout(v,5e3))};return(g,a)=>(e.openBlock(),e.createBlock(C.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[e.createVNode(D.VForm,{ref:"form",modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=h=>d.value=h),onSubmit:a[4]||(a[4]=e.withModifiers(h=>w(u.value),["prevent"]))},{default:e.withCtx(()=>[l.value?(e.openBlock(),e.createBlock(L.VAlert,{key:0,type:"error",dismissible:"",onClick:a[0]||(a[0]=h=>i.value=null)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value.message),1)]),_:1})):(e.openBlock(),e.createBlock($,{key:1,class:"text-center"})),c.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ve,[e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[a[5]||(a[5]=e.createElementVNode("div",{class:"mb-5"}," Enter registered user email address and we will send you a link to reset your password. ",-1)),e.createVNode(P.VTextField,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=h=>u.value=h),required:"",error:!!l.value,class:"mr-2",label:"Email","prepend-icon":"mdi-account",rules:[f.value.email]},null,8,["modelValue","error","rules"])]),_:1,__:[5]}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",depressed:"",color:"primary",type:"submit",size:"large",disabled:n.value},{default:e.withCtx(()=>a[6]||(a[6]=[e.createTextVNode(" Email Password Reset Link ")])),_:1,__:[6]},8,["disabled"])]),_:1})])),c.value?(e.openBlock(),e.createBlock(C.VContainer,{key:3,class:"pa-4 text-center"},{default:e.withCtx(()=>[e.createVNode(y.VCardText,{class:"text-h5"},{default:e.withCtx(()=>a[7]||(a[7]=[e.createTextVNode(" Email has been sent! ")])),_:1,__:[7]}),e.createVNode(y.VCardText,null,{default:e.withCtx(()=>a[8]||(a[8]=[e.createTextVNode("Please check your inbox and follow the instructions in the email to reset your account password")])),_:1,__:[8]}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",large:"",depressed:"",color:"primary",onClick:a[2]||(a[2]=h=>e.unref(s)(!1))},{default:e.withCtx(()=>a[9]||(a[9]=[e.createTextVNode(" Login ")])),_:1,__:[9]})]),_:1})]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),Ve={key:2},ke="#",we="(###) ###-####",be=e.defineComponent({__name:"LoginWithPhone",setup(o){const t=e.ref(!1),r=e.ref(Array(6).fill("")),s=e.ref("");let i=null;const n=A(),{textPhoneVerificationCode:l,confirmCode:c,SET_SHOW_LOGIN_WITH_PHONE:u}=n,d=e.computed({get:()=>n.error,set:V=>{n.error=V}}),f=e.computed(()=>n.sign_by_phone_step),v=e.computed(()=>n.getError),w=e.computed(()=>n.config),g=e.ref([]),a=e.computed(()=>({phoneNumber:s.value.replace(/\D/g,"").length<10?"Please enter a valid US phone number":!0})),h=()=>{if(i){const V={phoneNumber:s.value,recaptchaVerifier:i};l(V)}},p=()=>{c(r.value)};e.onMounted(()=>{if(w.value&&w.value.firebase){const V=_.getAuth(w.value.firebase);i=new _.RecaptchaVerifier("recaptcha-container",{size:"invisible"},V)}else console.error("[LoginWithPhone]: Firebase app not available in config for reCAPTCHA.")});const k=V=>{var E,S,T;(((E=V.clipboardData)==null?void 0:E.getData("text").substr(0,6))??"").split("").forEach((M,F)=>{F<r.value.length&&(r.value[F]=M)});const b=r.value.findIndex(M=>!M);b!==-1&&g.value[b]?(S=g.value[b])==null||S.focus():g.value[r.value.length-1]&&((T=g.value[r.value.length-1])==null||T.focus())},x=(V,m)=>{var E;let b=V;if(m.key==="Backspace"||m.key==="ArrowLeft")b=V>0?V-1:0,m.key==="Backspace"&&V>0&&(r.value[V]="");else if(/^[0-9]$/.test(m.key)||m.key==="ArrowRight"){if(/^[0-9]$/.test(m.key)&&V<r.value.length-1){e.nextTick(()=>{var S;g.value[V+1]&&((S=g.value[V+1])==null||S.focus())});return}b=V<r.value.length-1?V+1:V}g.value[b]&&((E=g.value[b])==null||E.focus())};return(V,m)=>{const b=e.resolveDirective("maska");return e.openBlock(),e.createBlock(C.VContainer,null,{default:e.withCtx(()=>[m[8]||(m[8]=e.createElementVNode("div",{id:"recaptcha-container"},null,-1)),e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[v.value?(e.openBlock(),e.createBlock(L.VAlert,{key:0,type:"error",dismissible:"",onClick:m[0]||(m[0]=E=>d.value=null)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(v.value.message),1)]),_:1})):(e.openBlock(),e.createBlock($,{key:1,class:"text-center"})),f.value===1?(e.openBlock(),e.createElementBlock("div",Ve,[e.createVNode(D.VForm,{ref:"form",modelValue:t.value,"onUpdate:modelValue":m[2]||(m[2]=E=>t.value=E),onSubmit:e.withModifiers(h,["prevent"])},{default:e.withCtx(()=>[e.createVNode(y.VCardText,null,{default:e.withCtx(()=>[e.withDirectives(e.createVNode(P.VTextField,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=E=>s.value=E),class:"mx-15 px-5 large-font",autocomplete:"off",label:"Phone Number","prepend-icon":"mdi-cellphone",prefix:"+1",rules:[a.value.phoneNumber]},null,8,["modelValue","rules"]),[[b,we]])]),_:1}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{color:"primary",block:"",large:"",depressed:"",disabled:!t.value,type:"submit"},{default:e.withCtx(()=>m[4]||(m[4]=[e.createTextVNode(" Send Code ")])),_:1,__:[4]},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])])):e.createCommentVNode("",!0),f.value===2?(e.openBlock(),e.createBlock(C.VContainer,{key:3},{default:e.withCtx(()=>[m[6]||(m[6]=e.createElementVNode("p",{class:"text-center"},[e.createTextVNode(" enter confirmation code"),e.createElementVNode("br"),e.createTextVNode(" you have received on your mobile phone ")],-1)),e.createVNode(C.VRow,{class:"centered-input"},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,(E,S)=>e.createVNode(C.VCol,{key:S,cols:"2"},{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createBlock(P.VTextField,{ref_for:!0,ref:T=>g.value[S]=T,key:S,modelValue:r.value[S],"onUpdate:modelValue":T=>r.value[S]=T,outlined:"",maxlength:"1",onKeyup:T=>x(S,T),onPaste:k},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[b,ke]])]),_:2},1024)),64))]),_:1}),e.createVNode(N.VBtn,{color:"primary",block:"",large:"",depressed:"",disabled:r.value.join("").length<6,onClick:p},{default:e.withCtx(()=>m[5]||(m[5]=[e.createTextVNode(" Confirm Code ")])),_:1,__:[5]},8,["disabled"])]),_:1,__:[6]})):e.createCommentVNode("",!0),e.createVNode(C.VContainer,{class:"text-center"},{default:e.withCtx(()=>[e.createVNode(N.VBtn,{text:"","x-small":"",color:"primary",onClick:m[3]||(m[3]=E=>e.unref(u)(!1))},{default:e.withCtx(()=>m[7]||(m[7]=[e.createTextVNode(" Sign In with email ")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1,__:[8]})}}}),ye=(o,t)=>{const r=o.__vccOpts||o;for(const[s,i]of t)r[s]=i;return r},Ne=ye(be,[["__scopeId","data-v-6de7752f"]]),Ce={key:0},xe={key:1},Ee={key:0},Se={key:1},Ae={key:2},Be={key:3},Pe=e.defineComponent({__name:"EmailVerification",setup(o){const t=A(),{is_loading:r,signOut:s,sendVerificationEmail:i,SET_EMAIL_VERIFICATION_SCREEN_SHOWN:n}=t,l=e.computed({get:()=>t.error,set:g=>{t.error=g}}),c=e.computed(()=>t.getError),u=e.computed(()=>t.isAuthenticated),d=e.computed(()=>t.isEmailResetPasswordLinkSent),f=e.computed(()=>t.isEmailVerificationLinkSent),v=()=>{l.value=null},w=()=>{i()};return e.watch(c,g=>{g&&setTimeout(v,5e3)}),(g,a)=>(e.openBlock(),e.createBlock(C.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:"",class:"text-center pa-5"},{default:e.withCtx(()=>[c.value?(e.openBlock(),e.createElementBlock("div",Ce,[a[4]||(a[4]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Error!",-1)),c.value?(e.openBlock(),e.createBlock(L.VAlert,{key:0,type:"error",dismissible:"",transition:"fade-transition",onClick:v},{default:e.withCtx(()=>{var h;return[e.createTextVNode(e.toDisplayString((h=c.value)==null?void 0:h.message),1)]}),_:1})):e.createCommentVNode("",!0),e.createVNode(N.VBtn,{class:"mt-2",color:"primary",onClick:a[0]||(a[0]=h=>e.unref(n)(!1))},{default:e.withCtx(()=>a[3]||(a[3]=[e.createTextVNode(" Back to Login ")])),_:1,__:[3]})])):(e.openBlock(),e.createElementBlock("div",xe,[f.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ee,[a[6]||(a[6]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Verification Required",-1)),e.createVNode(R.VIcon,{size:"100",color:"grey",class:"ma-4"},{default:e.withCtx(()=>a[5]||(a[5]=[e.createTextVNode("mdi-account")])),_:1,__:[5]})])),f.value?(e.openBlock(),e.createElementBlock("div",Se,[a[8]||(a[8]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Email Sent!",-1)),e.createVNode(R.VIcon,{size:"100",color:"grey",class:"ma-4"},{default:e.withCtx(()=>a[7]||(a[7]=[e.createTextVNode("mdi-email")])),_:1,__:[7]})])):e.createCommentVNode("",!0),a[15]||(a[15]=e.createElementVNode("div",{class:"text-grey-darken-2 mb-7 body-2"},[e.createElementVNode("p",null," Please check your email to verify your address. Click the link in the email we've sent you to confirm your account access. ")],-1)),d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ae,[a[10]||(a[10]=e.createElementVNode("p",{class:"text-grey-darken-2 mb-7 body-2"},[e.createTextVNode(" If you have not received a verification email,"),e.createElementVNode("br"),e.createTextVNode("click the button below. ")],-1)),e.createVNode(N.VBtn,{disabled:e.unref(r),color:"primary",onClick:w},{default:e.withCtx(()=>a[9]||(a[9]=[e.createTextVNode(" Send Verification Email ")])),_:1,__:[9]},8,["disabled"])])),d.value?(e.openBlock(),e.createElementBlock("div",Be,[e.createVNode(N.VBtn,{color:"primary",onClick:a[1]||(a[1]=h=>e.unref(n)(!1))},{default:e.withCtx(()=>a[11]||(a[11]=[e.createTextVNode(" Back to Login ")])),_:1,__:[11]})])):e.createCommentVNode("",!0),e.createVNode(C.VContainer,null,{default:e.withCtx(()=>[a[14]||(a[14]=e.createElementVNode("div",{class:"caption mb-2"},"- or -",-1)),u.value?(e.openBlock(),e.createBlock(N.VBtn,{key:0,color:"primary",variant:"outlined",onClick:e.unref(s)},{default:e.withCtx(()=>a[12]||(a[12]=[e.createTextVNode(" Sign Out ")])),_:1,__:[12]},8,["onClick"])):(e.openBlock(),e.createBlock(N.VBtn,{key:1,color:"primary",variant:"outlined",onClick:a[2]||(a[2]=h=>e.unref(n)(!1))},{default:e.withCtx(()=>a[13]||(a[13]=[e.createTextVNode(" Sign In ")])),_:1,__:[13]}))]),_:1,__:[14]})]))]),_:1})]),_:1}))}}),Te={class:"caption"},Re={key:0},Ie={key:0,class:"ml-2"},Le=e.defineComponent({__name:"LoginWithProvider",setup(o){const t=A(),{loginWithGoogle:r,loginWithFacebook:s,loginWithSaml:i,SET_SHOW_LOGIN_WITH_PHONE:n}=t,l=e.computed(()=>t.config),c=e.computed(()=>t.isLoginWithProvidersActive),u=e.computed(()=>t.isOnlySingleProvider);return(d,f)=>c.value?(e.openBlock(),e.createBlock(C.VContainer,{key:0,class:"text-center ma-0 pa-0"},{default:e.withCtx(()=>[e.createElementVNode("div",Te,[l.value.email?(e.openBlock(),e.createElementBlock("span",Re,"or ")):e.createCommentVNode("",!0),f[4]||(f[4]=e.createTextVNode("login with"))]),e.createVNode(C.VContainer,null,{default:e.withCtx(()=>[l.value.google?(e.openBlock(),e.createBlock(N.VBtn,{key:0,class:"mr-2",color:"#db3236",variant:"outlined",icon:!u.value,tooltip:"Authenticate with Gmail Account",onClick:f[0]||(f[0]=v=>e.unref(r)())},{default:e.withCtx(()=>[e.createVNode(R.VIcon,null,{default:e.withCtx(()=>f[5]||(f[5]=[e.createTextVNode("mdi-google")])),_:1,__:[5]}),e.createVNode(U.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Gmail Account"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),l.value.facebook?(e.openBlock(),e.createBlock(N.VBtn,{key:1,class:"mr-2",color:"#3b5998",variant:"outlined",icon:!u.value,onClick:f[1]||(f[1]=v=>e.unref(s)())},{default:e.withCtx(()=>[e.createVNode(R.VIcon,null,{default:e.withCtx(()=>f[6]||(f[6]=[e.createTextVNode("mdi-facebook")])),_:1,__:[6]}),e.createVNode(U.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Facebook Account"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),l.value.phone?(e.openBlock(),e.createBlock(N.VBtn,{key:2,class:"mr-2",color:"primary",variant:"outlined",icon:!u.value,onClick:f[2]||(f[2]=v=>e.unref(n)(!0))},{default:e.withCtx(()=>[e.createVNode(R.VIcon,null,{default:e.withCtx(()=>f[7]||(f[7]=[e.createTextVNode("mdi-cellphone")])),_:1,__:[7]}),e.createVNode(U.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Text Message To Your Phone"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),l.value.saml?(e.openBlock(),e.createBlock(N.VBtn,{key:3,color:"secondary",variant:"outlined",icon:!u.value,onClick:f[3]||(f[3]=v=>e.unref(i)())},{default:e.withCtx(()=>[e.createVNode(R.VIcon,null,{default:e.withCtx(()=>f[8]||(f[8]=[e.createTextVNode("mdi-onepassword")])),_:1,__:[8]}),u.value?(e.openBlock(),e.createElementBlock("span",Ie,e.toDisplayString(l.value.saml_text),1)):e.createCommentVNode("",!0),e.createVNode(U.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with SAML provider"})]),_:1},8,["icon"])):e.createCommentVNode("",!0)]),_:1})]),_:1})):e.createCommentVNode("",!0)}}),Ue={key:0},We={key:1},$e=e.defineComponent({__name:"AuthGuard",setup(o){const t=A(),{initializeGuard:r}=t,s=e.computed(()=>t.tab),i=e.computed(()=>t.config),n=e.computed(()=>t.is_loading),l=e.computed(()=>t.isLoginWithPhoneShown),c=e.computed(()=>t.isUserRegistrationAllowed),u=e.computed(()=>t.isResetPasswordScreenShown),d=e.computed(()=>t.isEmailVerificationScreenShown),f=e.computed(()=>t.is_authguard_dialog_persistent),v=Z.useRoute(),w=e.computed(()=>{var p;return((p=i.value)==null?void 0:p.debug)??!1}),g=e.computed(()=>v.path),a=e.computed({get:()=>t.init&&t.is_authguard_dialog_shown,set:p=>{t.is_authguard_dialog_shown=p,!p&&t.loginState&&h()}}),h=()=>{w.value&&console.log("[ auth guard ]: Dialog closed by user"),t.loginState=null};return e.onMounted(()=>{r()}),e.watch(g,(p,k)=>{typeof k>"u"||(w.value&&console.log("[ auth guard ]: vue router current route change: [",k,"] -> [",p,"]"),J())}),(p,k)=>(e.openBlock(),e.createBlock(Y.VDialog,{modelValue:a.value,"onUpdate:modelValue":k[2]||(k[2]=x=>a.value=x),persistent:f.value,"retain-focus":!1,"overlay-opacity":"0.95","content-class":"elevation-0"},{default:e.withCtx(()=>[e.createVNode(C.VContainer,{style:{"max-width":"500px"},class:"mb-5"},{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:"",outlined:""},{default:e.withCtx(()=>[e.createVNode(Q.VProgressLinear,{indeterminate:n.value},null,8,["indeterminate"]),d.value?(e.openBlock(),e.createElementBlock("div",Ue,[e.createVNode(Pe)])):(e.openBlock(),e.createElementBlock("div",We,[e.createVNode(B.VTabs,{modelValue:s.value,"onUpdate:modelValue":k[0]||(k[0]=x=>s.value=x),grow:""},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(B.VTab,{key:0,value:0},{default:e.withCtx(()=>k[3]||(k[3]=[e.createTextVNode(" Sign In ")])),_:1,__:[3]})),e.withDirectives((e.openBlock(),e.createBlock(B.VTab,{key:1,value:1},{default:e.withCtx(()=>k[4]||(k[4]=[e.createTextVNode(" Register ")])),_:1,__:[4]})),[[e.vShow,!u.value&&c.value]]),e.withDirectives((e.openBlock(),e.createBlock(B.VTab,{key:2,value:2},{default:e.withCtx(()=>k[5]||(k[5]=[e.createTextVNode(" Reset Password ")])),_:1,__:[5]})),[[e.vShow,(u.value||!c.value)&&i.value.email]])]),_:1},8,["modelValue"]),e.createVNode(y.VCardText,null,{default:e.withCtx(()=>[e.createVNode(B.VTabsWindow,{modelValue:s.value,"onUpdate:modelValue":k[1]||(k[1]=x=>s.value=x)},{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createBlock(B.VTabsWindowItem,{key:0,value:0,class:"pt--1"},{default:e.withCtx(()=>[e.createVNode(he)]),_:1})),[[e.vShow,!l.value]]),e.withDirectives((e.openBlock(),e.createBlock(B.VTabsWindowItem,{key:0,value:0,class:"pt-5"},{default:e.withCtx(()=>[e.createVNode(Ne)]),_:1})),[[e.vShow,!u.value&&c.value]]),(e.openBlock(),e.createBlock(B.VTabsWindowItem,{key:1,value:1,class:"pt-5"},{default:e.withCtx(()=>[e.createVNode(ge)]),_:1})),(e.openBlock(),e.createBlock(B.VTabsWindowItem,{key:2,value:2},{default:e.withCtx(()=>[e.createVNode(_e)]),_:1}))]),_:1},8,["modelValue"])]),_:1})])),d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(y.VCardActions,{key:2},{default:e.withCtx(()=>[e.createVNode(Le)]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]))}}),Me=async(o,t,r)=>{var n;const s=A(),i=((n=s.config)==null?void 0:n.debug)??!1;if(o.matched.some(l=>l.meta.requiresAuth))if(i&&console.log("[ auth guard ]: Route requires authentication. Evaluating..."),s.routesInitialized===!1&&(await s.initializeGuard(),s.routesInitialized=!0),s.isAuthenticated)i&&console.log("[ auth guard ]: User is authenticated."),r();else{i&&console.log("[ auth guard ]: User not authenticated."),s.loginState=o.fullPath,s.SET_PASSWORD_RESET_SCREEN_SHOWN(!1),s.SET_EMAIL_VERIFICATION_SCREEN_SHOWN(!1);const l=!t.name,c=t.name&&!t.matched.some(u=>u.meta.requiresAuth);s.is_authguard_dialog_persistent=l||!c,i&&console.log("[ auth guard ]: Navigation context:",{isDirectAccess:l,hasPublicRoute:c,fromRoute:t.name,toRoute:o.name,dialogPersistent:s.is_authguard_dialog_persistent}),s.toggleAuthDialog(!0),r(!1)}else r()},Oe={install:(o,t={})=>{const r={...pe,...t},{firebase:s,debug:i,verification:n,router:l,session:c}=r,u=_.getAuth(s);let d=_.browserLocalPersistence;c==="browser"||c==="session"?d=_.browserSessionPersistence:c==="none"&&(d=_.browserSessionPersistence,i&&console.log("[ auth guard ]: 'none' persistence is interpreted as browserSessionPersistence for Firebase.")),_.setPersistence(u,d).then(()=>{i&&console.log(`[ auth guard ]: Firebase session persistence set to ${c}`)}).catch(v=>{i&&console.error("[ auth guard ]: Error setting Firebase session persistence:",v)}),i&&(console.log("[ auth guard ]: wrapper initialization..."),s===null&&console.error("[ auth guard ]: ERROR: firebase instance missing in AuthenticationGuard config!"),l===null&&console.error("[ auth guard ]: ERROR: router instance missing in AuthenticationGuard config!")),o.config.globalProperties.$pinia||(console.log("[ auth guard ]: pinia store not detected - creating..."),o.use(z.createPinia()));const f=A();f.config=r,_.onAuthStateChanged(u,v=>{if(f.init=!0,f.current_user=v,l.isReady().then(()=>{J()}),v){i&&console.log("[ auth guard ]: auth state changed. User is Authenticated!");const w=u.currentUser;if(n&&w&&!w.emailVerified){const g=setInterval(async()=>{if(!u.currentUser){clearInterval(g);return}await u.currentUser.reload(),u.currentUser.emailVerified&&(clearInterval(g),window.location.reload())},3500)}}i&&console.log("[ auth guard ]: auth state changed. User ID: [",(v==null?void 0:v.uid)||null,"]")}),o.directive("maska",me),o.component("AuthenticationGuard",$e)}};exports.AuthMiddleware=Me;exports.default=Oe;exports.useAuthStore=A;

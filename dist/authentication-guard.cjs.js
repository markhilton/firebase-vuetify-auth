(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".large-font>input[data-v-e9ad2744]{font-size:1.5rem}.centered-input>input[data-v-e9ad2744]{text-align:center;font-weight:700;font-size:1.5rem}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const J=require("pinia"),b=require("firebase/auth"),e=require("vue"),I=require("vuetify/components/VIcon"),H=require("vuetify/components/VList"),U=require("vuetify/components/VAlert"),N=require("vuetify/components/VBtn"),y=require("vuetify/components/VCard"),oe=require("vuetify/components/VCheckbox"),S=require("vuetify/components/VGrid"),T=require("vuetify/components/VTextField"),X=require("vuetify/components/VForm"),re=require("vuetify/components/VSelect"),D=require("vuetify/components/VTooltip"),Z=require("vue-router"),ie=require("vuetify/components/VDialog"),ae=require("vuetify/components/VProgressLinear"),R=require("vuetify/components/VTabs"),ne=()=>({loggedIn:!1,initialized:!1,data:null,loginState:null,registrationPending:!1,registrationData:null,phoneAuthCredential:null,config:null,error:null,loading:!1,showPassword:!1,showPhoneAuth:!1,showSamlSSO:!1,showRegister:!1,showVerifyEmail:!1,showForgotPassword:!1,showResetPassword:!1,currentTab:null,samlError:null,samlProviderId:null,phoneAuthInProgress:!1,phoneAuthVerificationId:null,phoneConfirmationResult:null,localLoginData:null,routesInitialized:!1,current_user:null,init:!1,is_loading:!1,is_checking_auth:!1,is_session_persistant:!0,is_login_with_phone_shown:!1,is_authguard_dialog_shown:!1,is_authguard_dialog_persistent:!1,is_email_verification_link_sent:!1,is_email_reset_password_link_sent:!1,is_email_verification_screen_shown:!1,is_reset_password_screen_shown:!1,is_route_public:!1,is_from_public_to_auth:!1,text_confirmation:null,sign_by_phone_step:1,tab:0}),se={getError:o=>o.error,sessionPersistence:o=>{var t;return((t=o.config)==null?void 0:t.sessionPersistence)||"LOCAL"},uid:o=>{var t;return((t=o.current_user)==null?void 0:t.uid)||null},email:o=>{var t;return((t=o.current_user)==null?void 0:t.email)||null},emailVerified:o=>{var t;return((t=o.current_user)==null?void 0:t.emailVerified)||!1},displayName:o=>{var t;return((t=o.current_user)==null?void 0:t.displayName)||null},getDisplayName:o=>{var t;return((t=o.current_user)==null?void 0:t.displayName)||null},photoURL:o=>{var t;return((t=o.current_user)==null?void 0:t.photoURL)||null},providerData:o=>{var t;return((t=o.current_user)==null?void 0:t.providerData)||[]},phoneNumber:o=>{var t;return((t=o.current_user)==null?void 0:t.phoneNumber)||null},isAuthenticated:o=>o.loggedIn,isReady:o=>o.routesInitialized,isAnonymous:o=>{var t;return((t=o.current_user)==null?void 0:t.isAnonymous)||!1},requiresEmailVerification:o=>{var t,r,i;if((t=o.config)!=null&&t.requireEmailVerification&&!((r=o.current_user)!=null&&r.emailVerified)){const a=o.config.allowedDomains,n=(i=o.current_user)==null?void 0:i.email;if(a!=null&&a.length&&n){const s=n.split("@")[1];return a.includes(s)}return!0}return!1},isDomainAllowed:o=>{var a,n;const t=(a=o.config)==null?void 0:a.allowedDomains;if(!(t!=null&&t.length))return!0;const r=(n=o.current_user)==null?void 0:n.email;if(!r)return!0;const i=r.split("@")[1];return t.includes(i)},isUserAllowed:o=>{var i,a;const t=(i=o.config)==null?void 0:i.allowedUsers;if(!(t!=null&&t.length))return!0;const r=(a=o.current_user)==null?void 0:a.email;return r?t.includes(r):!1},hasProvider:o=>t=>{var r,i;return((i=(r=o.current_user)==null?void 0:r.providerData)==null?void 0:i.some(a=>a.providerId===t))||!1},hasPasswordProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(i=>i.providerId==="password"))||!1},hasPhoneProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(i=>i.providerId==="phone"))||!1},hasSocialProvider:o=>{var t,r;return((r=(t=o.current_user)==null?void 0:t.providerData)==null?void 0:r.some(i=>["google.com","facebook.com","saml"].includes(i.providerId)))||!1},isOnlySingleProvider:o=>{const t=o.config;return t?[t.google,t.facebook,t.email,t.phone,t.saml].filter(Boolean).length===1:!1},isUserRegistrationAllowed:o=>{var t;return((t=o.config)==null?void 0:t.registration)??!0},isResetPasswordScreenShown:o=>o.is_reset_password_screen_shown,isLoginWithPhoneShown:o=>o.is_login_with_phone_shown,isEmailVerificationScreenShown:o=>o.is_email_verification_screen_shown,isEmailVerificationLinkSent:o=>o.is_email_verification_link_sent,isEmailResetPasswordLinkSent:o=>o.is_email_reset_password_link_sent,getAuthGuardDialogPersistence:o=>o.is_authguard_dialog_persistent,isLoginWithProvidersActive:o=>{const t=o.config;return t?!!(t.google||t.facebook||t.saml||t.phone):!1},isCheckingAuth:o=>o.is_checking_auth},le={SET_TAB(o){console.log("[auth-actions] SET_TAB called with index:",o),console.log("[auth-actions] Current tab:",this.tab),this.tab=o,console.log("[auth-actions] Tab after update:",this.tab)},SET_EMAIL_VERIFICATION_SCREEN_SHOWN(o){this.is_email_verification_screen_shown=o,o===!1&&(this.error=null)},SET_REGISTER_SCREEN_SHOWN(o){console.log("[auth-actions] SET_REGISTER_SCREEN_SHOWN called with status:",o),this.tab=o?1:0,console.log("[auth-actions] Tab set to:",this.tab)},SET_PASSWORD_RESET_SCREEN_SHOWN(o){this.tab=o?2:0,this.is_reset_password_screen_shown=o,o===!1&&(this.is_email_reset_password_link_sent=!1)},SET_SHOW_LOGIN_WITH_PHONE(o){console.log("[auth-actions] SET_SHOW_LOGIN_WITH_PHONE called with status:",o),this.tab=o?3:0,this.is_login_with_phone_shown=o,o===!1&&(this.sign_by_phone_step=1),console.log("[auth-actions] After SET_SHOW_LOGIN_WITH_PHONE - tab:",this.tab,"is_login_with_phone_shown:",this.is_login_with_phone_shown)},async initializeGuard(){const o=this.config.debug,t=b.getAuth(this.config.firebase);o&&console.log("[ auth guard ]: component initialization"),this.is_checking_auth=!0;try{const r=await b.getRedirectResult(t);if(r&&r.user){o&&console.log("[ auth guard ]: redirect result found, processing...");const{uid:i,displayName:a,email:n,emailVerified:s,isAnonymous:h,phoneNumber:c,photoURL:m}=r.user;this.current_user={uid:i,displayName:a,email:n,emailVerified:s,isAnonymous:h,phoneNumber:c,photoURL:m},this.loggedIn=!0,this.data=r.user,this.is_authguard_dialog_shown=!1,this.is_loading=!1,this._handlePostAuthRedirect()}}catch(r){o&&console.error("[ auth guard ]: redirect result error:",r),this.error=r,this.is_loading=!1}return new Promise(r=>{const i=t.onAuthStateChanged(a=>{var n;if(a){const{uid:s,displayName:h,email:c,emailVerified:m,isAnonymous:u,phoneNumber:d,photoURL:V}=a;this.current_user={uid:s,displayName:h,email:c,emailVerified:m,isAnonymous:u,phoneNumber:d,photoURL:V},this.loggedIn=!0,this.data=a,o&&console.log("[ auth guard ]: initialization - user authenticated")}else{const s=this.loggedIn;if(this.current_user=null,this.loggedIn=!1,this.data=null,o&&console.log("[ auth guard ]: initialization - no user"),this.init&&s&&((n=this.router)!=null&&n.currentRoute.value)){const h=this.router.currentRoute.value;h.matched.some(m=>m.meta.requiresAuth)&&(this.loginState=h.fullPath,this.toggleAuthDialog(!0),this.is_authguard_dialog_persistent=!0,o&&console.log("[ auth guard ]: showing auth dialog after sign out on protected route"))}}this.is_checking_auth=!1,i(),r()})})},_handlePostAuthRedirect(){var o;this.loginState&&this.router&&((((o=this.config)==null?void 0:o.debug)??!1)&&console.log("[ auth guard ]: Redirecting to:",this.loginState),this.router.push(this.loginState),this.loginState=null)},_isMobileDevice(){if(typeof window>"u")return!1;const o=window.navigator.userAgent.toLowerCase(),r=["android","webos","iphone","ipad","ipod","blackberry","windows phone"].some(n=>o.includes(n)),i="ontouchstart"in window||navigator.maxTouchPoints>0,a=window.innerWidth<=768;return r||i&&a},_getAuthMethod(){const o=this.config.authMethod||"auto";return o==="auto"?this._isMobileDevice()?"redirect":"popup":o},async _signInWithProvider(o,t){const r=b.getAuth(this.config.firebase),i=this._getAuthMethod(),a=this.config.authMethodFallback||(i==="popup"?"redirect":"popup");this.config.debug&&console.log(`[ auth guard ]: Trying ${i} method for ${t} authentication`);try{let n=null;if(i==="popup")n=await b.signInWithPopup(r,o);else return await b.signInWithRedirect(r,o),Promise.resolve({});return n}catch(n){if(this.config.debug&&console.error(`[ auth guard ]: ${t} ${i} auth failed:`,n),a&&n.code==="auth/popup-blocked"){this.config.debug&&console.log(`[ auth guard ]: Trying fallback ${a} method for ${t}`);try{return a==="popup"?await b.signInWithPopup(r,o):(await b.signInWithRedirect(r,o),Promise.resolve({}))}catch(s){throw this.config.debug&&console.error(`[ auth guard ]: ${t} fallback ${a} auth also failed:`,s),s}}throw n}},async loginWithEmail({email:o,password:t}){try{const r=b.getAuth(this.config.firebase);this.is_loading=!0,await b.signOut(r),this.is_session_persistant?await b.setPersistence(r,b.browserLocalPersistence):await b.setPersistence(r,b.browserSessionPersistence);const i=await b.signInWithEmailAndPassword(r,o,t);if(i.user){const{uid:a,displayName:n,email:s,emailVerified:h,isAnonymous:c,phoneNumber:m,photoURL:u}=i.user;this.current_user={uid:a,displayName:n,email:s,emailVerified:h,isAnonymous:c,phoneNumber:m,photoURL:u},this.loggedIn=!0,this.data=i.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve()}catch(r){return this.error=r,this.is_loading=!1,Promise.reject(r)}},async loginWithGoogle(){try{this.is_loading=!0;const o=new b.GoogleAuthProvider;o.setCustomParameters({prompt:"select_account"});const t=await this._signInWithProvider(o,"Google");if(t.user){const{uid:r,displayName:i,email:a,emailVerified:n,isAnonymous:s,phoneNumber:h,photoURL:c}=t.user;this.current_user={uid:r,displayName:i,email:a,emailVerified:n,isAnonymous:s,phoneNumber:h,photoURL:c},this.loggedIn=!0,this.data=t.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve(t)}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}},async loginWithFacebook(){try{this.is_loading=!0;const o=new b.FacebookAuthProvider,t=await this._signInWithProvider(o,"Facebook");if(t.user){const{uid:r,displayName:i,email:a,emailVerified:n,isAnonymous:s,phoneNumber:h,photoURL:c}=t.user;this.current_user={uid:r,displayName:i,email:a,emailVerified:n,isAnonymous:s,phoneNumber:h,photoURL:c},this.loggedIn=!0,this.data=t.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve(t)}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}},loginWithPhone(){},async loginWithSaml(){try{this.is_loading=!0;const o=new b.SAMLAuthProvider(this.config.saml_provider_id),t=await this._signInWithProvider(o,"SAML");if(t.user){const{uid:r,displayName:i,email:a,emailVerified:n,isAnonymous:s,phoneNumber:h,photoURL:c}=t.user;this.current_user={uid:r,displayName:i,email:a,emailVerified:n,isAnonymous:s,phoneNumber:h,photoURL:c},this.loggedIn=!0,this.data=t.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,Promise.resolve(t)}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}},async textPhoneVerificationCode({phoneNumber:o,recaptchaVerifier:t}){try{this.is_loading=!0,this.text_confirmation=null;const r=o.startsWith("+")?o:"+1"+o.replace(/\D/g,""),i=b.getAuth(this.config.firebase);this.config.debug&&console.log("[textPhoneVerificationCode]: Sending verification code to:",r);const a=await b.signInWithPhoneNumber(i,r,t);return this.is_loading=!1,this.sign_by_phone_step=2,this.text_confirmation=a,Promise.resolve(a)}catch(r){return console.error("[textPhoneVerificationCode]: Error sending verification code:",r),r.code==="auth/invalid-app-credential"?this.error={message:"Phone authentication is not properly configured. Please check that phone authentication is enabled in your Firebase Console and that your domain is authorized.",code:r.code}:r.code==="auth/quota-exceeded"?this.error={message:"Too many requests. Please try again later.",code:r.code}:r.code==="auth/captcha-check-failed"?this.error={message:"reCAPTCHA verification failed. Please try again.",code:r.code}:this.error=r,this.is_loading=!1,Promise.reject(r)}},async confirmCode(o){try{if(this.is_loading=!0,!this.text_confirmation)throw new Error("No confirmation result available");const t=Array.isArray(o)?o.join(""):o;this.config.debug&&console.log("confirmationCode",t);const r=await this.text_confirmation.confirm(t);if(r.user){const{uid:i,displayName:a,email:n,emailVerified:s,isAnonymous:h,phoneNumber:c,photoURL:m}=r.user;this.current_user={uid:i,displayName:a,email:n,emailVerified:s,isAnonymous:h,phoneNumber:c,photoURL:m},this.loggedIn=!0,this.data=r.user,this.is_authguard_dialog_shown=!1,this._handlePostAuthRedirect()}return this.is_loading=!1,this.sign_by_phone_step=1,Promise.resolve(r)}catch(t){return this.error=t,this.is_loading=!1,this.sign_by_phone_step=1,Promise.reject(t)}},async registerUser(o,t,r){try{this.is_loading=!0;const i=this.config.verification,a=b.getAuth(this.config.firebase);try{await b.createUserWithEmailAndPassword(a,t,r),this.config.debug&&console.log("User Account Created!")}catch(s){throw this.error=s,this.is_loading=!1,this.config.debug&&console.error("[ registerUser ]: Error occurred during creating user",s),s}await b.signInWithEmailAndPassword(a,t,r),this.current_user={...this.current_user,displayName:o},a.currentUser&&await b.updateProfile(a.currentUser,{displayName:o});const n=t.split("@")[1]||"XXX";(i===!0||Array.isArray(i)&&i.includes(n))&&a.currentUser&&await b.sendEmailVerification(a.currentUser),this.is_loading=!1}catch(i){this.error=i,this.is_loading=!1}},async emailPasswordResetLink(o){try{this.is_loading=!0;const t=b.getAuth(this.config.firebase);return await b.sendPasswordResetEmail(t,o),this.error=null,this.is_loading=!1,this.is_email_reset_password_link_sent=!0,Promise.resolve()}catch(t){return this.error=t,this.is_loading=!1,Promise.reject(t)}},async signOut(){try{const o=this.config.debug,t=b.getAuth(this.config.firebase);return o&&console.log("[ auth guard ]: signOut request"),await b.signOut(t),this.current_user=null,Promise.resolve()}catch(o){return this.error=o,Promise.reject(o)}},toggleAuthDialog(o){var t;o!==void 0?this.is_authguard_dialog_shown=o:this.is_authguard_dialog_shown=!this.is_authguard_dialog_shown,(t=this.config)!=null&&t.debug&&console.log("[ auth guard ]: dialog visibility set to",this.is_authguard_dialog_shown)},async sendVerificationEmail(){try{this.is_loading=!0;const o=b.getAuth(this.config.firebase);if(!o.currentUser)throw new Error("No authenticated user");return await b.sendEmailVerification(o.currentUser),this.is_loading=!1,this.is_email_verification_link_sent=!0,Promise.resolve()}catch(o){return this.error=o,this.is_loading=!1,Promise.reject(o)}}},P=J.defineStore("auth",{state:ne,getters:se,actions:le});var ue=Object.defineProperty,ce=(o,t,r)=>t in o?ue(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,$=(o,t,r)=>ce(o,typeof t!="symbol"?t+"":t,r);const G={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},j=(o,t,r)=>o.replaceAll(t,"").replace(r,".").replace("..",".").replace(/[^.\d]/g,""),K=(o,t,r)=>{var i;return new Intl.NumberFormat(((i=r.number)==null?void 0:i.locale)??"en",{minimumFractionDigits:o,maximumFractionDigits:t,roundingMode:"trunc"})},de=(o,t=!0,r)=>{var i,a,n,s;const h=((i=r.number)==null?void 0:i.unsigned)!==!0&&o.startsWith("-")?"-":"",c=((a=r.number)==null?void 0:a.fraction)??0;let m=K(0,c,r);const u=m.formatToParts(1000.12),d=((n=u.find(p=>p.type==="group"))==null?void 0:n.value)??" ",V=((s=u.find(p=>p.type==="decimal"))==null?void 0:s.value)??".",_=j(o,d,V);if(Number.isNaN(parseFloat(_)))return h;const l=_.split(".");if(l[1]!=null&&l[1].length>=1){const p=l[1].length<=c?l[1].length:c;m=K(p,c,r)}let g=m.format(parseFloat(_));return t?c>0&&_.endsWith(".")&&!_.slice(0,-1).includes(".")&&(g+=V):g=j(g,d,V),h+g};class he{constructor(t={}){$(this,"opts",{}),$(this,"memo",new Map);const r={...t};if(r.tokens!=null){r.tokens=r.tokensReplace?{...r.tokens}:{...G,...r.tokens};for(const i of Object.values(r.tokens))typeof i.pattern=="string"&&(i.pattern=new RegExp(i.pattern))}else r.tokens=G;Array.isArray(r.mask)&&(r.mask.length>1?r.mask=[...r.mask].sort((i,a)=>i.length-a.length):r.mask=r.mask[0]??""),r.mask===""&&(r.mask=null),this.opts=r}masked(t){return this.process(String(t),this.findMask(String(t)))}unmasked(t){return this.process(String(t),this.findMask(String(t)),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const r=this.findMask(String(t));if(this.opts.mask==null||r==null)return!1;const i=this.process(String(t),r).length;return typeof this.opts.mask=="string"?i>=this.opts.mask.length:i>=r.length}findMask(t){const r=this.opts.mask;if(r==null)return null;if(typeof r=="string")return r;if(typeof r=="function")return r(t);const i=this.process(t,r.slice(-1).pop()??"",!1);return r.find(a=>this.process(t,a,!1).length>=i.length)??""}escapeMask(t){const r=[],i=[];return t.split("").forEach((a,n)=>{a==="!"&&t[n-1]!=="!"?i.push(n-i.length):r.push(a)}),{mask:r.join(""),escaped:i}}process(t,r,i=!0){if(this.opts.number!=null)return de(t,i,this.opts);if(r==null)return t;const a=`v=${t},mr=${r},m=${i?1:0}`;if(this.memo.has(a))return this.memo.get(a);const{mask:n,escaped:s}=this.escapeMask(r),h=[],c=this.opts.tokens!=null?this.opts.tokens:{},m=this.isReversed()?-1:1,u=this.isReversed()?"unshift":"push",d=this.isReversed()?0:n.length-1,V=this.isReversed()?()=>p>-1&&f>-1:()=>p<n.length&&f<t.length,_=C=>!this.isReversed()&&C<=d||this.isReversed()&&C>=d;let l,g=-1,p=this.isReversed()?n.length-1:0,f=this.isReversed()?t.length-1:0,v=!1;for(;V();){const C=n.charAt(p),L=c[C],W=(L==null?void 0:L.transform)!=null?L.transform(t.charAt(f)):t.charAt(f);if(!s.includes(p)&&L!=null?(W.match(L.pattern)!=null?(h[u](W),L.repeated?(g===-1?g=p:p===d&&p!==g&&(p=g-m),d===g&&(p-=m)):L.multiple&&(v=!0,p-=m),p+=m):L.multiple?v&&(p+=m,f-=m,v=!1):W===l?l=void 0:L.optional&&(p+=m,f-=m),f+=m):(i&&!this.isEager()&&h[u](C),W===C&&!this.isEager()?f+=m:l=C,this.isEager()||(p+=m)),this.isEager())for(;_(p)&&(c[n.charAt(p)]==null||s.includes(p));){if(i){if(h[u](n.charAt(p)),t.charAt(f)===n.charAt(p)){p+=m,f+=m;continue}}else n.charAt(p)===t.charAt(f)&&(f+=m);p+=m}}return this.memo.set(a,h.join("")),this.memo.get(a)}}const Y=o=>JSON.parse(o.replaceAll("'",'"')),me=(o,t={})=>{const r={...t};o.dataset.maska!=null&&o.dataset.maska!==""&&(r.mask=ge(o.dataset.maska)),o.dataset.maskaEager!=null&&(r.eager=F(o.dataset.maskaEager)),o.dataset.maskaReversed!=null&&(r.reversed=F(o.dataset.maskaReversed)),o.dataset.maskaTokensReplace!=null&&(r.tokensReplace=F(o.dataset.maskaTokensReplace)),o.dataset.maskaTokens!=null&&(r.tokens=fe(o.dataset.maskaTokens));const i={};return o.dataset.maskaNumberLocale!=null&&(i.locale=o.dataset.maskaNumberLocale),o.dataset.maskaNumberFraction!=null&&(i.fraction=parseInt(o.dataset.maskaNumberFraction)),o.dataset.maskaNumberUnsigned!=null&&(i.unsigned=F(o.dataset.maskaNumberUnsigned)),(o.dataset.maskaNumber!=null||Object.values(i).length>0)&&(r.number=i),r},F=o=>o!==""?!!JSON.parse(o):!0,ge=o=>o.startsWith("[")&&o.endsWith("]")?Y(o):o,fe=o=>{if(o.startsWith("{")&&o.endsWith("}"))return Y(o);const t={};return o.split("|").forEach(r=>{const i=r.split(":");t[i[0]]={pattern:new RegExp(i[1]),optional:i[2]==="optional",multiple:i[2]==="multiple",repeated:i[2]==="repeated"}}),t};class pe{constructor(t,r={}){$(this,"items",new Map),$(this,"eventAbortController"),$(this,"onInput",i=>{if(i instanceof CustomEvent&&i.type==="input"&&!i.isTrusted&&!i.bubbles)return;const a=i.target,n=this.items.get(a);if(n===void 0)return;const s="inputType"in i&&i.inputType.startsWith("delete"),h=n.isEager(),c=s&&h&&n.unmasked(a.value)===""?"":a.value;this.fixCursor(a,s,()=>this.setValue(a,c))}),this.options=r,this.eventAbortController=new AbortController,this.init(this.getInputs(t))}update(t={}){this.options={...t},this.init(Array.from(this.items.keys()))}updateValue(t){var r;t.value!==""&&t.value!==((r=this.processInput(t))==null?void 0:r.masked)&&this.setValue(t,t.value)}destroy(){this.eventAbortController.abort(),this.items.clear()}init(t){const r=this.getOptions(this.options);for(const i of t){if(!this.items.has(i)){const{signal:n}=this.eventAbortController;i.addEventListener("input",this.onInput,{capture:!0,signal:n})}const a=new he(me(i,r));this.items.set(i,a),queueMicrotask(()=>this.updateValue(i)),i.selectionStart===null&&a.isEager()&&console.warn("Maska: input of `%s` type is not supported",i.type)}}getInputs(t){return typeof t=="string"?Array.from(document.querySelectorAll(t)):"length"in t?Array.from(t):[t]}getOptions(t){const{onMaska:r,preProcess:i,postProcess:a,...n}=t;return n}fixCursor(t,r,i){var a,n;const s=t.selectionStart,h=t.value;if(i(),s===null||s===h.length&&!r)return;const c=t.value,m=h.slice(0,s),u=c.slice(0,s),d=(a=this.processInput(t,m))==null?void 0:a.unmasked,V=(n=this.processInput(t,u))==null?void 0:n.unmasked;if(d===void 0||V===void 0)return;let _=s;m!==u&&(_+=r?c.length-h.length:d.length-V.length),t.setSelectionRange(_,_)}setValue(t,r){const i=this.processInput(t,r);i!==void 0&&(t.value=i.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(a=>a(i)):this.options.onMaska(i)),t.dispatchEvent(new CustomEvent("maska",{detail:i})),t.dispatchEvent(new CustomEvent("input",{detail:i.masked})))}processInput(t,r){const i=this.items.get(t);if(i===void 0)return;let a=r??t.value;this.options.preProcess!=null&&(a=this.options.preProcess(a));let n=i.masked(a);return this.options.postProcess!=null&&(n=this.options.postProcess(n)),{masked:n,unmasked:i.unmasked(a),completed:i.completed(a)}}}const q=new WeakMap,_e=(o,t)=>{if(o.arg==null||o.instance==null)return;const r="setup"in o.instance.$.type;o.arg in o.instance?o.instance[o.arg]=t:r&&console.warn("Maska: please expose `%s` using defineExpose",o.arg)},ve=(o,t)=>{var r;const i=o instanceof HTMLInputElement?o:o.querySelector("input");if(i==null||(i==null?void 0:i.type)==="file")return;let a={};if(t.value!=null&&(a=typeof t.value=="string"?{mask:t.value}:{...t.value}),t.arg!=null){const n=s=>{const h=t.modifiers.unmasked?s.unmasked:t.modifiers.completed?s.completed:s.masked;_e(t,h)};a.onMaska=a.onMaska==null?n:Array.isArray(a.onMaska)?[...a.onMaska,n]:[a.onMaska,n]}q.has(i)?(r=q.get(i))==null||r.update(a):q.set(i,new pe(i,a))},ke={debug:!1,store:null,router:null,firebase:null,session:"local",saml:!1,saml_text:"Login with SAML",saml_provider_id:"saml.okta",email:!0,phone:!1,google:!1,facebook:!1,title:"Authenticate",subtitle:"Firebase Vuetify Authentication NPM package",icon:"mdi-brightness-7",iconColor:"orange",verification:!1,registration:!0},Q=()=>{const o=P();if(!o.config)return;const{firebase:t,debug:r}=o.config,i=b.getAuth(t),a=(c,m)=>{r&&console.log(`[ auth guard ]: ${m}`,c?"authenticated":"not authenticated")},n=i.currentUser,s=!!n,h=o.isAuthenticated;s!==h&&(o.loggedIn=s,o.data=n,r&&console.log("[ auth guard ]: Auth state mismatch detected. Updated store:",{firebase:s,store:h,updated:o.loggedIn})),a(o.loggedIn,"Current auth state:")},O=e.defineComponent({__name:"AuthBranding",setup(o){const t=P(),r=e.computed(()=>t.config);return(i,a)=>(e.openBlock(),e.createBlock(H.VList,{lines:"two",dense:""},{default:e.withCtx(()=>[e.createVNode(H.VListItem,{title:r.value.title,subtitle:r.value.subtitle},{title:e.withCtx(()=>[e.createVNode(I.VIcon,{color:r.value.iconColor},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value.icon),1)]),_:1},8,["color"]),e.createTextVNode(" "+e.toDisplayString(r.value.title),1)]),_:1},8,["title","subtitle"])]),_:1}))}}),Ve={class:"text-center pb-4"},be=e.defineComponent({__name:"LoginCard",setup(o){const t=P(),{loginWithEmail:r,SET_PASSWORD_RESET_SCREEN_SHOWN:i,SET_REGISTER_SCREEN_SHOWN:a,SET_TAB:n}=t,s=e.computed(()=>t.config),h=e.computed({get:()=>t.error,set:f=>{t.error=f}}),c=e.computed(()=>t.getError),m=e.computed(()=>t.isUserRegistrationAllowed),u=e.computed(()=>t.isResetPasswordScreenShown),d=e.ref(""),V=e.ref(""),_=e.ref(!0),l=()=>{h.value=null},g=()=>{if(d.value&&V.value){const f={email:d.value,password:V.value};r(f),V.value=""}else{const f={code:"validation-error",message:"Email and password are required."};h.value=f,setTimeout(l,5e3)}},p=()=>{t.is_session_persistant=_.value};return e.onMounted(()=>{_.value=t.is_session_persistant}),e.watch(c,f=>{f&&setTimeout(l,5e3)}),(f,v)=>(e.openBlock(),e.createBlock(S.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[c.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,class:"my-3",type:"error",dismissible:"",transition:"fade-transition",onClick:l},{default:e.withCtx(()=>v[5]||(v[5]=[e.createTextVNode(" Provided credentials are invalid. ")])),_:1,__:[5]})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"}))]),_:1}),s.value.email?(e.openBlock(),e.createBlock(y.VCard,{key:0,flat:""},{default:e.withCtx(()=>[e.createElementVNode("form",{onSubmit:e.withModifiers(g,["prevent"])},[e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(T.VTextField,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=C=>d.value=C),required:"",class:"mr-2",label:"Email",type:"email",name:"email",autocomplete:"email","prepend-icon":"mdi-account"},null,8,["modelValue"]),e.createVNode(T.VTextField,{modelValue:V.value,"onUpdate:modelValue":v[1]||(v[1]=C=>V.value=C),required:"",class:"mr-2",name:"password",type:"password",label:"Password",autocomplete:"current-password","prepend-icon":"mdi-lock"},null,8,["modelValue"]),e.createVNode(oe.VCheckbox,{modelValue:_.value,"onUpdate:modelValue":v[2]||(v[2]=C=>_.value=C),dense:"",class:"ml-8",name:"remember",label:"Remember Me",onChange:p},null,8,["modelValue"])]),_:1}),e.createElementVNode("div",Ve,[!u.value&&m.value?(e.openBlock(),e.createBlock(N.VBtn,{key:0,variant:"text",size:"x-small",color:"primary",onClick:v[3]||(v[3]=C=>(e.unref(i)(!0),e.unref(n)(2)))},{default:e.withCtx(()=>v[6]||(v[6]=[e.createTextVNode(" Forgot Password? ")])),_:1,__:[6]})):(e.openBlock(),e.createBlock(N.VBtn,{key:1,variant:"text",size:"x-small",color:"primary",onClick:v[4]||(v[4]=C=>(e.unref(a)(!1),e.unref(n)(1)))},{default:e.withCtx(()=>v[7]||(v[7]=[e.createTextVNode(" Register as new user ")])),_:1,__:[7]}))]),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",type:"submit"},{default:e.withCtx(()=>v[8]||(v[8]=[e.createTextVNode(" Login ")])),_:1,__:[8]})]),_:1})],32)]),_:1})):e.createCommentVNode("",!0)]),_:1}))}}),we=e.defineComponent({__name:"RegisterUser",setup(o){const t=P(),{registerUser:r}=t,i=e.computed(()=>t.getError),a=e.computed({get:()=>t.error,set:l=>{t.error=l}}),n=e.ref(""),s=e.ref(""),h=e.ref(""),c=e.ref(""),m=e.ref(!1),u=e.ref(null),d=e.computed(()=>({email:n.value?!0:"Email cannot be empty",password:s.value?!0:"Password cannot be empty",displayName:c.value?!0:"Name cannot be empty",confirm:s.value!==h.value?"Passwords do not match":!0})),V=()=>{a.value=null};e.watch(i,l=>{l&&setTimeout(V,5e3)});const _=()=>{var l;(l=u.value)!=null&&l.validate()&&r&&r(c.value,n.value,s.value)};return(l,g)=>(e.openBlock(),e.createBlock(S.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[e.createVNode(X.VForm,{ref_key:"form",ref:u,modelValue:m.value,"onUpdate:modelValue":g[4]||(g[4]=p=>m.value=p),onSubmit:e.withModifiers(_,["prevent"])},{default:e.withCtx(()=>[a.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,type:"error",dismissible:"",transition:"fade-transition",onClick:V},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value.message),1)]),_:1})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"})),e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(T.VTextField,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=p=>c.value=p),required:"",class:"mr-2",label:"Name","prepend-icon":"mdi-account",rules:[d.value.displayName]},null,8,["modelValue","rules"]),e.createVNode(T.VTextField,{modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=p=>n.value=p),required:"",class:"mr-2",label:"Email","prepend-icon":"mdi-email",rules:[d.value.email]},null,8,["modelValue","rules"]),e.createVNode(T.VTextField,{modelValue:s.value,"onUpdate:modelValue":g[2]||(g[2]=p=>s.value=p),autocomplete:"off",required:"",class:"mr-2",type:"password",label:"Password","prepend-icon":"mdi-lock",rules:[d.value.password]},null,8,["modelValue","rules"]),e.createVNode(T.VTextField,{modelValue:h.value,"onUpdate:modelValue":g[3]||(g[3]=p=>h.value=p),autocomplete:"off",required:"",class:"mr-2",type:"password",label:"Confirm password","prepend-icon":"mdi-lock",rules:[d.value.confirm]},null,8,["modelValue","rules"])]),_:1}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",large:"",depressed:"",color:"primary",type:"submit",disabled:!m.value},{default:e.withCtx(()=>g[5]||(g[5]=[e.createTextVNode(" Register ")])),_:1,__:[5]},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}}),ye={key:2},Ce=e.defineComponent({__name:"PasswordReset",setup(o){const t=P(),{emailPasswordResetLink:r,SET_PASSWORD_RESET_SCREEN_SHOWN:i}=t,a=e.computed({get:()=>t.error,set:_=>{t.error=_}}),n=e.computed(()=>t.is_loading),s=e.computed(()=>t.getError),h=e.computed(()=>t.isEmailResetPasswordLinkSent),c=e.ref(""),m=e.ref(!1),u=e.computed(()=>({email:c.value===""?"Email cannot be empty":!0})),d=()=>{a.value=null},V=()=>{c.value?r(c.value):(a.value={message:"Email cannot be empty"},setTimeout(d,5e3))};return(_,l)=>(e.openBlock(),e.createBlock(S.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[e.createVNode(X.VForm,{ref:"form",modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=g=>m.value=g),onSubmit:l[4]||(l[4]=e.withModifiers(g=>V(c.value),["prevent"]))},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,type:"error",dismissible:"",onClick:l[0]||(l[0]=g=>a.value=null)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value.message),1)]),_:1})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"})),h.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ye,[e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[l[5]||(l[5]=e.createElementVNode("div",{class:"mb-5"}," Enter registered user email address and we will send you a link to reset your password. ",-1)),e.createVNode(T.VTextField,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=g=>c.value=g),required:"",error:!!s.value,class:"mr-2",label:"Email","prepend-icon":"mdi-account",rules:[u.value.email]},null,8,["modelValue","error","rules"])]),_:1,__:[5]}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",depressed:"",color:"primary",type:"submit",size:"large",disabled:n.value},{default:e.withCtx(()=>l[6]||(l[6]=[e.createTextVNode(" Email Password Reset Link ")])),_:1,__:[6]},8,["disabled"])]),_:1})])),h.value?(e.openBlock(),e.createBlock(S.VContainer,{key:3,class:"pa-4 text-center"},{default:e.withCtx(()=>[e.createVNode(y.VCardText,{class:"text-h5"},{default:e.withCtx(()=>l[7]||(l[7]=[e.createTextVNode(" Email has been sent! ")])),_:1,__:[7]}),e.createVNode(y.VCardText,null,{default:e.withCtx(()=>l[8]||(l[8]=[e.createTextVNode("Please check your inbox and follow the instructions in the email to reset your account password")])),_:1,__:[8]}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",large:"",depressed:"",color:"primary",onClick:l[2]||(l[2]=g=>e.unref(i)(!1))},{default:e.withCtx(()=>l[9]||(l[9]=[e.createTextVNode(" Login ")])),_:1,__:[9]})]),_:1})]),_:1})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});function xe(o){const t=o.app.options,r=[];t.authDomain?!t.authDomain.includes(".firebaseapp.com")&&!t.authDomain.includes("localhost")&&r.push(`authDomain '${t.authDomain}' might not be valid`):r.push("authDomain is not configured"),t.projectId||r.push("projectId is not configured"),t.apiKey||r.push("apiKey is not configured");const i=window.location.hostname,a=window.location.protocol;return console.log("[Firebase Phone Auth Check]:"),console.log("- Auth Domain:",t.authDomain),console.log("- Project ID:",t.projectId),console.log("- Current Domain:",i),console.log("- Current Protocol:",a),r.length>0&&(console.error("[Firebase Phone Auth Check] Configuration issues found:"),r.forEach(n=>console.error(`  - ${n}`))),a!=="https:"&&i!=="localhost"&&i!=="127.0.0.1"&&console.warn("[Firebase Phone Auth Check] Phone auth requires HTTPS (except for localhost)"),r}const Ne="#",Ae=e.defineComponent({__name:"LoginWithPhone",setup(o){const t=e.computed(()=>{const k=i.value.replace(/\D/g,""),w=g.value;return k.length>=w.minLength&&k.length<=w.maxLength}),r=e.ref(Array(6).fill("")),i=e.ref(""),a=e.ref("+1");let n=null;const s=P(),{textPhoneVerificationCode:h,confirmCode:c}=s,m=e.computed({get:()=>s.error,set:k=>{s.error=k}}),u=e.computed(()=>s.sign_by_phone_step),d=e.computed(()=>s.getError),V=e.computed(()=>s.config),_=e.ref([]),l=[{value:"+1",label:"ðŸ‡ºðŸ‡¸ +1 USA/Canada",minLength:10,maxLength:10},{value:"+44",label:"ðŸ‡¬ðŸ‡§ +44 UK",minLength:10,maxLength:11},{value:"+33",label:"ðŸ‡«ðŸ‡· +33 France",minLength:9,maxLength:9},{value:"+49",label:"ðŸ‡©ðŸ‡ª +49 Germany",minLength:10,maxLength:12},{value:"+39",label:"ðŸ‡®ðŸ‡¹ +39 Italy",minLength:9,maxLength:10},{value:"+34",label:"ðŸ‡ªðŸ‡¸ +34 Spain",minLength:9,maxLength:9},{value:"+91",label:"ðŸ‡®ðŸ‡³ +91 India",minLength:10,maxLength:10},{value:"+81",label:"ðŸ‡¯ðŸ‡µ +81 Japan",minLength:10,maxLength:11},{value:"+86",label:"ðŸ‡¨ðŸ‡³ +86 China",minLength:11,maxLength:11},{value:"+82",label:"ðŸ‡°ðŸ‡· +82 South Korea",minLength:10,maxLength:11},{value:"+61",label:"ðŸ‡¦ðŸ‡º +61 Australia",minLength:9,maxLength:9},{value:"+55",label:"ðŸ‡§ðŸ‡· +55 Brazil",minLength:11,maxLength:11},{value:"+52",label:"ðŸ‡²ðŸ‡½ +52 Mexico",minLength:10,maxLength:10},{value:"+27",label:"ðŸ‡¿ðŸ‡¦ +27 South Africa",minLength:9,maxLength:9},{value:"+234",label:"ðŸ‡³ðŸ‡¬ +234 Nigeria",minLength:10,maxLength:10},{value:"+20",label:"ðŸ‡ªðŸ‡¬ +20 Egypt",minLength:10,maxLength:10},{value:"+31",label:"ðŸ‡³ðŸ‡± +31 Netherlands",minLength:9,maxLength:9},{value:"+46",label:"ðŸ‡¸ðŸ‡ª +46 Sweden",minLength:9,maxLength:10},{value:"+47",label:"ðŸ‡³ðŸ‡´ +47 Norway",minLength:8,maxLength:8},{value:"+358",label:"ðŸ‡«ðŸ‡® +358 Finland",minLength:9,maxLength:10},{value:"+65",label:"ðŸ‡¸ðŸ‡¬ +65 Singapore",minLength:8,maxLength:8},{value:"+64",label:"ðŸ‡³ðŸ‡¿ +64 New Zealand",minLength:9,maxLength:10},{value:"+971",label:"ðŸ‡¦ðŸ‡ª +971 UAE",minLength:9,maxLength:9},{value:"+7",label:"ðŸ‡·ðŸ‡º +7 Russia",minLength:10,maxLength:10},{value:"+380",label:"ðŸ‡ºðŸ‡¦ +380 Ukraine",minLength:9,maxLength:9},{value:"+48",label:"ðŸ‡µðŸ‡± +48 Poland",minLength:9,maxLength:9},{value:"+32",label:"ðŸ‡§ðŸ‡ª +32 Belgium",minLength:9,maxLength:9},{value:"+41",label:"ðŸ‡¨ðŸ‡­ +41 Switzerland",minLength:9,maxLength:9},{value:"+43",label:"ðŸ‡¦ðŸ‡¹ +43 Austria",minLength:10,maxLength:13},{value:"+45",label:"ðŸ‡©ðŸ‡° +45 Denmark",minLength:8,maxLength:8},{value:"+351",label:"ðŸ‡µðŸ‡¹ +351 Portugal",minLength:9,maxLength:9},{value:"+30",label:"ðŸ‡¬ðŸ‡· +30 Greece",minLength:10,maxLength:10},{value:"+90",label:"ðŸ‡¹ðŸ‡· +90 Turkey",minLength:10,maxLength:10},{value:"+66",label:"ðŸ‡¹ðŸ‡­ +66 Thailand",minLength:9,maxLength:10},{value:"+62",label:"ðŸ‡®ðŸ‡© +62 Indonesia",minLength:10,maxLength:12},{value:"+60",label:"ðŸ‡²ðŸ‡¾ +60 Malaysia",minLength:9,maxLength:11},{value:"+63",label:"ðŸ‡µðŸ‡­ +63 Philippines",minLength:10,maxLength:10},{value:"+84",label:"ðŸ‡»ðŸ‡³ +84 Vietnam",minLength:9,maxLength:10},{value:"+54",label:"ðŸ‡¦ðŸ‡· +54 Argentina",minLength:10,maxLength:11},{value:"+56",label:"ðŸ‡¨ðŸ‡± +56 Chile",minLength:9,maxLength:9},{value:"+57",label:"ðŸ‡¨ðŸ‡´ +57 Colombia",minLength:10,maxLength:10},{value:"+51",label:"ðŸ‡µðŸ‡ª +51 Peru",minLength:9,maxLength:9},{value:"+58",label:"ðŸ‡»ðŸ‡ª +58 Venezuela",minLength:10,maxLength:10}],g=e.computed(()=>l.find(k=>k.value===a.value)||l[0]),p=e.computed(()=>{const k=i.value.replace(/\D/g,""),w=g.value;return k.length<w.minLength?{phoneNumber:`Please enter a valid phone number (minimum ${w.minLength} digits)`}:k.length>w.maxLength?{phoneNumber:`Phone number too long (maximum ${w.maxLength} digits)`}:{phoneNumber:!0}}),f=async()=>{try{if(n||(console.log("[LoginWithPhone]: Initializing reCAPTCHA..."),await W()),n){const k={phoneNumber:a.value+i.value.replace(/\D/g,""),recaptchaVerifier:n};h(k)}else console.error("[LoginWithPhone]: Failed to initialize reCAPTCHA. Please check:"),console.error("1. Phone authentication is enabled in Firebase Console"),console.error("2. Your Firebase configuration is correct"),m.value={message:"Failed to initialize phone authentication. Please try again."}}catch(k){console.error("[LoginWithPhone]: Error in phone verification:",k),m.value=k}},v=()=>{c(r.value)},C=()=>{switch(a.value){case"+1":return"(555) 123-4567";case"+44":return"20 1234 5678";case"+33":return"6 12 34 56 78";case"+49":return"151 12345678";case"+91":return"98765 43210";case"+81":return"90-1234-5678";case"+86":return"138 0013 8000";default:return"123456789"}},L=()=>{let k=i.value.replace(/\D/g,"");if(a.value==="+1"&&k.length>0)k.length>=6?k=`(${k.slice(0,3)}) ${k.slice(3,6)}-${k.slice(6,10)}`:k.length>=3&&(k=`(${k.slice(0,3)}) ${k.slice(3)}`);else{const w=g.value;k=k.slice(0,w.maxLength)}i.value=k},W=async()=>{var k;try{if(!n&&V.value&&V.value.firebase){if(!document.getElementById("recaptcha-container")){console.error("[LoginWithPhone]: recaptcha-container element not found");const x=document.createElement("div");x.id="recaptcha-container",document.body.appendChild(x)}const A=b.getAuth(V.value.firebase);if(xe(A),await new Promise(x=>setTimeout(x,100)),!A||!A.app){console.error("[LoginWithPhone]: Firebase Auth is not properly initialized"),m.value={message:"Firebase authentication is not properly configured. Please check your Firebase setup."};return}try{const x=document.getElementById("recaptcha-container");x&&(x.innerHTML=""),n=new b.RecaptchaVerifier(A,"recaptcha-container",{size:"invisible",callback:()=>{console.log("[LoginWithPhone]: reCAPTCHA solved")},"expired-callback":()=>{console.log("[LoginWithPhone]: reCAPTCHA expired"),n=null}}),await n.render(),console.log("[LoginWithPhone]: RecaptchaVerifier created successfully")}catch(x){if(console.error("[LoginWithPhone]: Error creating RecaptchaVerifier:",x),(k=x.message)!=null&&k.includes("appVerificationDisabledForTesting")&&(console.error("[LoginWithPhone]: This error often occurs when:"),console.error("1. Phone authentication is not enabled in Firebase Console"),console.error("2. Firebase Auth is not properly initialized"),console.error("3. There's a version mismatch in Firebase SDK")),n){try{n.clear()}catch(E){console.error("[LoginWithPhone]: Error clearing RecaptchaVerifier:",E)}n=null}x.value={message:"Failed to initialize phone authentication. Please try again."}}}}catch(w){console.error("[LoginWithPhone]: Error in recaptcha initialization:",w)}};e.onUnmounted(()=>{if(n)try{n.clear(),n=null}catch(k){console.error("[LoginWithPhone]: Error clearing RecaptchaVerifier:",k)}});const ee=k=>{var x,E,B;(((x=k.clipboardData)==null?void 0:x.getData("text").substr(0,6))??"").split("").forEach((M,z)=>{z<r.value.length&&(r.value[z]=M)});const A=r.value.findIndex(M=>!M);A!==-1&&_.value[A]?(E=_.value[A])==null||E.focus():_.value[r.value.length-1]&&((B=_.value[r.value.length-1])==null||B.focus())},te=(k,w)=>{var x;let A=k;if(w.key==="Backspace"||w.key==="ArrowLeft")A=k>0?k-1:0,w.key==="Backspace"&&k>0&&(r.value[k]="");else if(/^[0-9]$/.test(w.key)||w.key==="ArrowRight"){if(/^[0-9]$/.test(w.key)&&k<r.value.length-1){e.nextTick(()=>{var E;_.value[k+1]&&((E=_.value[k+1])==null||E.focus())});return}A=k<r.value.length-1?k+1:k}_.value[A]&&((x=_.value[A])==null||x.focus())};return(k,w)=>{const A=e.resolveDirective("maska");return e.openBlock(),e.createBlock(S.VContainer,null,{default:e.withCtx(()=>[w[8]||(w[8]=e.createElementVNode("div",{id:"recaptcha-container"},null,-1)),e.createVNode(y.VCard,{flat:""},{default:e.withCtx(()=>[d.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,class:"my-3",type:"error",dismissible:"",transition:"fade-transition",onClick:w[0]||(w[0]=x=>m.value=null)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.value.message||d.value),1)]),_:1})):(e.openBlock(),e.createBlock(O,{key:1,class:"text-center"}))]),_:1}),u.value===1?(e.openBlock(),e.createBlock(y.VCard,{key:0,flat:""},{default:e.withCtx(()=>[e.createElementVNode("form",{onSubmit:e.withModifiers(f,["prevent"])},[e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[e.createVNode(re.VSelect,{modelValue:a.value,"onUpdate:modelValue":w[1]||(w[1]=x=>a.value=x),items:l,"item-title":"label","item-value":"value",label:"Country","prepend-icon":"mdi-earth",class:"mb-4"},null,8,["modelValue"]),e.createVNode(T.VTextField,{modelValue:i.value,"onUpdate:modelValue":w[2]||(w[2]=x=>i.value=x),required:"",autocomplete:"off",label:"Phone Number","prepend-icon":"mdi-cellphone",prefix:a.value,placeholder:C(),rules:[p.value.phoneNumber],onInput:L},null,8,["modelValue","prefix","placeholder","rules"]),w[3]||(w[3]=e.createElementVNode("div",{style:{height:"84px"}},null,-1))]),_:1,__:[3]}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",type:"submit",disabled:!t.value},{default:e.withCtx(()=>w[4]||(w[4]=[e.createTextVNode(" Send Code ")])),_:1,__:[4]},8,["disabled"])]),_:1})],32)]),_:1})):e.createCommentVNode("",!0),u.value===2?(e.openBlock(),e.createBlock(y.VCard,{key:1,flat:""},{default:e.withCtx(()=>[e.createVNode(y.VCardText,{class:"mb-0 pb-0"},{default:e.withCtx(()=>[w[5]||(w[5]=e.createElementVNode("p",{class:"text-center text-body-2 text-medium-emphasis mb-4"},[e.createTextVNode(" Enter the confirmation code"),e.createElementVNode("br"),e.createTextVNode(" sent to your mobile phone ")],-1)),e.createVNode(S.VRow,{class:"centered-input"},{default:e.withCtx(()=>[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(6,(x,E)=>e.createVNode(S.VCol,{key:E,cols:"2"},{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createBlock(T.VTextField,{ref_for:!0,ref:B=>_.value[E]=B,key:E,modelValue:r.value[E],"onUpdate:modelValue":B=>r.value[E]=B,variant:"outlined",maxlength:"1","hide-details":"",onKeyup:B=>te(E,B),onPaste:ee},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[A,Ne]])]),_:2},1024)),64))]),_:1}),w[6]||(w[6]=e.createElementVNode("div",{style:{height:"84px"}},null,-1))]),_:1,__:[5,6]}),e.createVNode(y.VCardActions,null,{default:e.withCtx(()=>[e.createVNode(N.VBtn,{block:"",size:"large",variant:"outlined",color:"primary",disabled:r.value.join("").length<6,onClick:v},{default:e.withCtx(()=>w[7]||(w[7]=[e.createTextVNode(" Confirm Code ")])),_:1,__:[7]},8,["disabled"])]),_:1})]),_:1})):e.createCommentVNode("",!0)]),_:1,__:[8]})}}}),Ee=(o,t)=>{const r=o.__vccOpts||o;for(const[i,a]of t)r[i]=a;return r},Pe=Ee(Ae,[["__scopeId","data-v-e9ad2744"]]),Se={key:0},Le={key:1},Re={key:0},Te={key:1},Be={key:2},Ie={key:3},We=e.defineComponent({__name:"EmailVerification",setup(o){const t=P(),{is_loading:r,signOut:i,sendVerificationEmail:a,SET_EMAIL_VERIFICATION_SCREEN_SHOWN:n}=t,s=e.computed({get:()=>t.error,set:_=>{t.error=_}}),h=e.computed(()=>t.getError),c=e.computed(()=>t.isAuthenticated),m=e.computed(()=>t.isEmailResetPasswordLinkSent),u=e.computed(()=>t.isEmailVerificationLinkSent),d=()=>{s.value=null},V=()=>{a()};return e.watch(h,_=>{_&&setTimeout(d,5e3)}),(_,l)=>(e.openBlock(),e.createBlock(S.VContainer,null,{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:"",class:"text-center pa-5"},{default:e.withCtx(()=>[h.value?(e.openBlock(),e.createElementBlock("div",Se,[l[4]||(l[4]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Error!",-1)),h.value?(e.openBlock(),e.createBlock(U.VAlert,{key:0,type:"error",dismissible:"",transition:"fade-transition",onClick:d},{default:e.withCtx(()=>{var g;return[e.createTextVNode(e.toDisplayString((g=h.value)==null?void 0:g.message),1)]}),_:1})):e.createCommentVNode("",!0),e.createVNode(N.VBtn,{class:"mt-2",color:"primary",onClick:l[0]||(l[0]=g=>e.unref(n)(!1))},{default:e.withCtx(()=>l[3]||(l[3]=[e.createTextVNode(" Back to Login ")])),_:1,__:[3]})])):(e.openBlock(),e.createElementBlock("div",Le,[u.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Re,[l[6]||(l[6]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Verification Required",-1)),e.createVNode(I.VIcon,{size:"100",color:"grey",class:"ma-4"},{default:e.withCtx(()=>l[5]||(l[5]=[e.createTextVNode("mdi-account")])),_:1,__:[5]})])),u.value?(e.openBlock(),e.createElementBlock("div",Te,[l[8]||(l[8]=e.createElementVNode("div",{class:"text-h4 text-grey mb-3"},"Email Sent!",-1)),e.createVNode(I.VIcon,{size:"100",color:"grey",class:"ma-4"},{default:e.withCtx(()=>l[7]||(l[7]=[e.createTextVNode("mdi-email")])),_:1,__:[7]})])):e.createCommentVNode("",!0),l[15]||(l[15]=e.createElementVNode("div",{class:"text-grey-darken-2 mb-7 body-2"},[e.createElementVNode("p",null," Please check your email to verify your address. Click the link in the email we've sent you to confirm your account access. ")],-1)),m.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Be,[l[10]||(l[10]=e.createElementVNode("p",{class:"text-grey-darken-2 mb-7 body-2"},[e.createTextVNode(" If you have not received a verification email,"),e.createElementVNode("br"),e.createTextVNode("click the button below. ")],-1)),e.createVNode(N.VBtn,{disabled:e.unref(r),color:"primary",onClick:V},{default:e.withCtx(()=>l[9]||(l[9]=[e.createTextVNode(" Send Verification Email ")])),_:1,__:[9]},8,["disabled"])])),m.value?(e.openBlock(),e.createElementBlock("div",Ie,[e.createVNode(N.VBtn,{color:"primary",onClick:l[1]||(l[1]=g=>e.unref(n)(!1))},{default:e.withCtx(()=>l[11]||(l[11]=[e.createTextVNode(" Back to Login ")])),_:1,__:[11]})])):e.createCommentVNode("",!0),e.createVNode(S.VContainer,null,{default:e.withCtx(()=>[l[14]||(l[14]=e.createElementVNode("div",{class:"caption mb-2"},"- or -",-1)),c.value?(e.openBlock(),e.createBlock(N.VBtn,{key:0,color:"primary",variant:"outlined",onClick:e.unref(i)},{default:e.withCtx(()=>l[12]||(l[12]=[e.createTextVNode(" Sign Out ")])),_:1,__:[12]},8,["onClick"])):(e.openBlock(),e.createBlock(N.VBtn,{key:1,color:"primary",variant:"outlined",onClick:l[2]||(l[2]=g=>e.unref(n)(!1))},{default:e.withCtx(()=>l[13]||(l[13]=[e.createTextVNode(" Sign In ")])),_:1,__:[13]}))]),_:1,__:[14]})]))]),_:1})]),_:1}))}}),$e={class:"caption"},Ue={key:0},De={key:0,class:"ml-2"},Fe=e.defineComponent({__name:"LoginWithProvider",setup(o){const t=P(),{loginWithGoogle:r,loginWithFacebook:i,loginWithSaml:a,SET_SHOW_LOGIN_WITH_PHONE:n}=t,s=e.computed(()=>t.config),h=e.computed(()=>t.isLoginWithProvidersActive),c=e.computed(()=>t.isOnlySingleProvider);return(m,u)=>h.value?(e.openBlock(),e.createBlock(S.VContainer,{key:0,class:"text-center ma-0 pa-0"},{default:e.withCtx(()=>[e.createElementVNode("div",$e,[s.value.email?(e.openBlock(),e.createElementBlock("span",Ue,"or ")):e.createCommentVNode("",!0),u[4]||(u[4]=e.createTextVNode("login with"))]),e.createVNode(S.VContainer,null,{default:e.withCtx(()=>[s.value.google?(e.openBlock(),e.createBlock(N.VBtn,{key:0,class:"mr-2",color:"#db3236",variant:"outlined",icon:!c.value,tooltip:"Authenticate with Gmail Account",onClick:u[0]||(u[0]=d=>e.unref(r)())},{default:e.withCtx(()=>[e.createVNode(I.VIcon,null,{default:e.withCtx(()=>u[5]||(u[5]=[e.createTextVNode("mdi-google")])),_:1,__:[5]}),e.createVNode(D.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Gmail Account"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),s.value.facebook?(e.openBlock(),e.createBlock(N.VBtn,{key:1,class:"mr-2",color:"#3b5998",variant:"outlined",icon:!c.value,onClick:u[1]||(u[1]=d=>e.unref(i)())},{default:e.withCtx(()=>[e.createVNode(I.VIcon,null,{default:e.withCtx(()=>u[6]||(u[6]=[e.createTextVNode("mdi-facebook")])),_:1,__:[6]}),e.createVNode(D.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Facebook Account"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),s.value.phone?(e.openBlock(),e.createBlock(N.VBtn,{key:2,class:"mr-2",color:"primary",variant:"outlined",icon:!c.value,onClick:u[2]||(u[2]=d=>e.unref(n)(!0))},{default:e.withCtx(()=>[e.createVNode(I.VIcon,null,{default:e.withCtx(()=>u[7]||(u[7]=[e.createTextVNode("mdi-cellphone")])),_:1,__:[7]}),e.createVNode(D.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with Text Message To Your Phone"})]),_:1},8,["icon"])):e.createCommentVNode("",!0),s.value.saml?(e.openBlock(),e.createBlock(N.VBtn,{key:3,color:"secondary",variant:"outlined",icon:!c.value,onClick:u[3]||(u[3]=d=>e.unref(a)())},{default:e.withCtx(()=>[e.createVNode(I.VIcon,null,{default:e.withCtx(()=>u[8]||(u[8]=[e.createTextVNode("mdi-onepassword")])),_:1,__:[8]}),c.value?(e.openBlock(),e.createElementBlock("span",De,e.toDisplayString(s.value.saml_text),1)):e.createCommentVNode("",!0),e.createVNode(D.VTooltip,{activator:"parent",location:"bottom",text:"Authenticate with SAML provider"})]),_:1},8,["icon"])):e.createCommentVNode("",!0)]),_:1})]),_:1})):e.createCommentVNode("",!0)}}),Oe={key:0},Me={key:1},qe=e.defineComponent({__name:"AuthGuard",setup(o){const t=P(),{initializeGuard:r}=t,i=e.ref(t.tab);e.watch(()=>t.tab,f=>{console.log("[AuthGuard] Store tab changed to:",f),i.value=f}),e.watch(()=>t.isLoginWithPhoneShown,f=>{console.log("[AuthGuard] Phone login shown:",f),f&&(i.value=3)}),e.watch(()=>t.isResetPasswordScreenShown,f=>{console.log("[AuthGuard] Reset password shown:",f),f&&(i.value=2)}),e.watch(i,(f,v)=>{console.log("[AuthGuard] Local tab changed from",v,"to:",f),t.tab!==f&&t.SET_TAB(f),(f===0||f===1)&&(t.isResetPasswordScreenShown&&t.SET_PASSWORD_RESET_SCREEN_SHOWN(!1),t.isLoginWithPhoneShown&&t.SET_SHOW_LOGIN_WITH_PHONE(!1))});const a=i,n=e.computed(()=>t.config),s=e.computed(()=>t.is_loading),h=e.computed(()=>t.isLoginWithPhoneShown),c=e.computed(()=>{const f=t.isUserRegistrationAllowed;return console.log("[AuthGuard] isUserRegistrationAllowed:",f),f}),m=e.computed(()=>t.isResetPasswordScreenShown),u=e.computed(()=>t.isEmailVerificationScreenShown),d=e.computed(()=>t.is_authguard_dialog_persistent),V=Z.useRoute(),_=e.computed(()=>{var f;return((f=n.value)==null?void 0:f.debug)??!1}),l=e.computed(()=>V.path),g=e.computed({get:()=>t.init&&t.is_authguard_dialog_shown,set:f=>{t.is_authguard_dialog_shown=f,!f&&t.loginState&&p()}}),p=()=>{_.value&&console.log("[ auth guard ]: Dialog closed by user"),t.loginState=null};return e.onMounted(()=>{r()}),e.watch(l,(f,v)=>{typeof v>"u"||(_.value&&console.log("[ auth guard ]: vue router current route change: [",v,"] -> [",f,"]"),Q())}),(f,v)=>(e.openBlock(),e.createBlock(ie.VDialog,{modelValue:g.value,"onUpdate:modelValue":v[3]||(v[3]=C=>g.value=C),persistent:d.value,"retain-focus":!1,"overlay-opacity":"0.95","content-class":"elevation-0"},{default:e.withCtx(()=>[e.createVNode(S.VContainer,{style:{"max-width":"500px"},class:"mb-5"},{default:e.withCtx(()=>[e.createVNode(y.VCard,{flat:"",outlined:"",style:{"min-height":"500px",display:"flex","flex-direction":"column"}},{default:e.withCtx(()=>[e.createVNode(ae.VProgressLinear,{indeterminate:s.value},null,8,["indeterminate"]),u.value?(e.openBlock(),e.createElementBlock("div",Oe,[e.createVNode(We)])):(e.openBlock(),e.createElementBlock("div",Me,[e.createVNode(R.VTabs,{modelValue:e.unref(a),"onUpdate:modelValue":v[1]||(v[1]=C=>e.isRef(a)?a.value=C:null),grow:""},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(R.VTab,{key:0,value:0},{default:e.withCtx(()=>v[4]||(v[4]=[e.createTextVNode(" Sign In ")])),_:1,__:[4]})),c.value?(e.openBlock(),e.createBlock(R.VTab,{key:1,value:1,onClick:v[0]||(v[0]=()=>console.log("[AuthGuard] Register tab clicked!"))},{default:e.withCtx(()=>v[5]||(v[5]=[e.createTextVNode(" Register ")])),_:1,__:[5]})):e.createCommentVNode("",!0),m.value&&n.value.email?(e.openBlock(),e.createBlock(R.VTab,{key:2,value:2},{default:e.withCtx(()=>v[6]||(v[6]=[e.createTextVNode(" Reset Password ")])),_:1,__:[6]})):e.createCommentVNode("",!0),h.value&&n.value.phone?(e.openBlock(),e.createBlock(R.VTab,{key:3,value:3},{default:e.withCtx(()=>v[7]||(v[7]=[e.createTextVNode(" Log in with Phone ")])),_:1,__:[7]})):e.createCommentVNode("",!0)]),_:1},8,["modelValue"]),e.createVNode(y.VCardText,null,{default:e.withCtx(()=>[e.createVNode(R.VTabsWindow,{modelValue:e.unref(a),"onUpdate:modelValue":v[2]||(v[2]=C=>e.isRef(a)?a.value=C:null)},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:0,value:0,class:"pt--1"},{default:e.withCtx(()=>[e.createVNode(be)]),_:1})),(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:1,value:1,class:"pt-5"},{default:e.withCtx(()=>[e.createVNode(we)]),_:1})),(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:2,value:2},{default:e.withCtx(()=>[e.createVNode(Ce)]),_:1})),(e.openBlock(),e.createBlock(R.VTabsWindowItem,{key:3,value:3},{default:e.withCtx(()=>[e.createVNode(Pe)]),_:1}))]),_:1},8,["modelValue"])]),_:1})])),u.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(y.VCardActions,{key:2},{default:e.withCtx(()=>[e.createVNode(Fe)]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue","persistent"]))}}),ze=async(o,t,r)=>{var n;const i=P(),a=((n=i.config)==null?void 0:n.debug)??!1;if(o.matched.some(s=>s.meta.requiresAuth))if(a&&console.log("[ auth guard ]: Route requires authentication. Evaluating..."),i.routesInitialized===!1&&(await i.initializeGuard(),i.routesInitialized=!0),i.isAuthenticated)a&&console.log("[ auth guard ]: User is authenticated."),r();else{a&&console.log("[ auth guard ]: User not authenticated."),i.loginState=o.fullPath,i.SET_PASSWORD_RESET_SCREEN_SHOWN(!1),i.SET_EMAIL_VERIFICATION_SCREEN_SHOWN(!1);const s=!t.name,h=t.name&&!t.matched.some(c=>c.meta.requiresAuth);i.is_authguard_dialog_persistent=s||!h,a&&console.log("[ auth guard ]: Navigation context:",{isDirectAccess:s,hasPublicRoute:h,fromRoute:t.name,toRoute:o.name,dialogPersistent:i.is_authguard_dialog_persistent}),i.toggleAuthDialog(!0),a&&console.log("[ auth guard ]: Blocking navigation to protected route"),r(!1)}else r()},He=e.defineComponent({__name:"AuthRouterView",props:{fallbackRoute:{default:"/"}},setup(o){const t=P(),r=Z.useRouter(),i=o;let a=null;const n=async c=>{var m;try{const u=r.resolve(c);if(u&&u.matched.length>0){const d=u.matched[u.matched.length-1];if((m=d.components)!=null&&m.default){if(typeof d.components.default=="function"){const V=await d.components.default();return V.default||V}return d.components.default}}}catch(u){console.error(`[AuthRouterView] Error loading fallback component from route ${c}:`,u)}return null},s=c=>{try{return r.resolve(c).matched.some(u=>u.meta.requiresAuth===!0)}catch{return!1}},h=(c,m)=>{var d,V;return c?!m.matched.some(_=>_.meta.requiresAuth)||t.isAuthenticated?c:i.fallbackRoute&&s(i.fallbackRoute)?((d=t.config)!=null&&d.debug&&console.log(`[AuthRouterView] Fallback route ${i.fallbackRoute} is also protected, hiding content`),{name:"AuthRouterViewEmpty",template:"<div></div>"}):((V=t.config)!=null&&V.debug&&console.log(`[AuthRouterView] Showing fallback content for protected route: ${m.path}`),!a&&i.fallbackRoute&&(a=e.defineAsyncComponent(async()=>{const _=await n(i.fallbackRoute);return _||{name:"AuthRouterViewFallback",template:"<div></div>"}})),a||c):void 0};return(c,m)=>{const u=e.resolveComponent("router-view");return e.openBlock(),e.createBlock(u,null,{default:e.withCtx(({Component:d,route:V})=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(h(d,V))))]),_:1})}}}),Ge={install:(o,t={})=>{const r={...ke,...t},{firebase:i,debug:a,verification:n,router:s,session:h}=r,c=b.getAuth(i);let m=b.browserLocalPersistence;h==="browser"||h==="session"?m=b.browserSessionPersistence:h==="none"&&(m=b.browserSessionPersistence,a&&console.log("[ auth guard ]: 'none' persistence is interpreted as browserSessionPersistence for Firebase.")),b.setPersistence(c,m).then(()=>{a&&console.log(`[ auth guard ]: Firebase session persistence set to ${h}`)}).catch(d=>{a&&console.error("[ auth guard ]: Error setting Firebase session persistence:",d)}),a&&(console.log("[ auth guard ]: wrapper initialization..."),i===null&&console.error("[ auth guard ]: ERROR: firebase instance missing in AuthenticationGuard config!"),s===null&&console.error("[ auth guard ]: ERROR: router instance missing in AuthenticationGuard config!")),o.config.globalProperties.$pinia||(console.log("[ auth guard ]: pinia store not detected - creating..."),o.use(J.createPinia()));const u=P();u.config=r,b.getRedirectResult(c).then(d=>{if(a&&console.log("[ auth guard ]: Checking redirect result:",d),d&&d.user){a&&console.log("[ auth guard ]: Redirect auth successful");const{uid:V,displayName:_,email:l,emailVerified:g,isAnonymous:p,phoneNumber:f,photoURL:v}=d.user;u.current_user={uid:V,displayName:_,email:l,emailVerified:g,isAnonymous:p,phoneNumber:f,photoURL:v},u.loggedIn=!0,u.data=d.user,u.is_authguard_dialog_shown&&u.toggleAuthDialog(!1),u.loginState&&(a&&console.log("[ auth guard ]: Clearing loginState after redirect:",u.loginState),u.loginState=null)}else a&&console.log("[ auth guard ]: No redirect result or user")}).catch(d=>{a&&console.error("[ auth guard ]: Redirect auth error:",d),u.error=d}),b.onAuthStateChanged(c,d=>{const V=u.loggedIn,_=u.init;if(u.init=!0,u.current_user=d,u.loggedIn=!!d,d?u.data=d:(u.data=null,_&&V&&s.isReady().then(()=>{const l=s.currentRoute.value;l.matched.some(p=>p.meta.requiresAuth)&&(a&&console.log("[ auth guard ]: User signed out on protected route, showing auth dialog"),u.loginState=l.fullPath,u.SET_PASSWORD_RESET_SCREEN_SHOWN(!1),u.SET_EMAIL_VERIFICATION_SCREEN_SHOWN(!1),u.toggleAuthDialog(!0),u.is_authguard_dialog_persistent=!0,s.replace(l.fullPath).catch(p=>{a&&console.log("[ auth guard ]: Route re-evaluation error:",p)}))})),s.isReady().then(()=>{Q()}),d){if(a&&console.log("[ auth guard ]: auth state changed. User is Authenticated!"),u.is_authguard_dialog_shown&&(a&&console.log("[ auth guard ]: dialog visibility set to false"),u.toggleAuthDialog(!1)),u.loginState){const g=u.loginState;a&&console.log("[ auth guard ]: Navigating to stored route:",g),u.loginState=null,s.push(g).catch(p=>{a&&console.error("[ auth guard ]: Navigation error:",p)})}else{const g=s.currentRoute.value;g.matched.some(f=>f.meta.requiresAuth)&&(a&&console.log("[ auth guard ]: User authenticated on protected route, forcing re-evaluation"),s.replace(g.fullPath))}const l=c.currentUser;if(n&&l&&!l.emailVerified){const g=setInterval(async()=>{if(!c.currentUser){clearInterval(g);return}await c.currentUser.reload(),c.currentUser.emailVerified&&(clearInterval(g),window.location.reload())},3500)}}a&&console.log("[ auth guard ]: auth state changed. User ID: [",(d==null?void 0:d.uid)||null,"]")}),o.directive("maska",ve),o.component("AuthenticationGuard",qe)}};exports.AuthMiddleware=ze;exports.AuthRouterView=He;exports.default=Ge;exports.useAuthStore=P;
